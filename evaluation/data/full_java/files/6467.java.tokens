package org . elasticsearch . index . fielddata ; import org . apache . lucene . util . ArrayUtil ; import org . apache . lucene . util . InPlaceMergeSorter ; import org . apache . lucene . util . Sorter ; public abstract class SortingNumericDoubleValues extends SortedNumericDoubleValues { private int count ; protected double [ ] values ; private final Sorter sorter ; protected SortingNumericDoubleValues ( ) { values = new double [ <int> ] ; sorter = new InPlaceMergeSorter ( ) { @Override protected void swap ( int i , int j ) { final double tmp = values [ i ] ; values [ i ] = values [ j ] ; values [ j ] = tmp ; } @Override protected int compare ( int i , int j ) { return Double . compare ( values [ i ] , values [ j ] ) ; } } ; } protected final void resize ( int newSize ) { count = newSize ; values = ArrayUtil . grow ( values , count ) ; } protected final void sort ( ) { sorter . sort ( <int> , count ) ; } @Override public final int count ( ) { return count ; } @Override public final double valueAt ( int index ) { return values [ index ] ; } } 
