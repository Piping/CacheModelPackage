package org . gradle . cache . internal ; import org . gradle . cache . PersistentStateCache ; public class FileIntegrityViolationSuppressingPersistentStateCacheDecorator < T > implements PersistentStateCache < T > { private final PersistentStateCache < T > delegate ; public FileIntegrityViolationSuppressingPersistentStateCacheDecorator ( PersistentStateCache < T > delegate ) { this . delegate = delegate ; } public T get ( ) { try { return delegate . get ( ) ; } catch ( FileIntegrityViolationException e ) { return null ; } } public void set ( T newValue ) { delegate . set ( newValue ) ; } public void update ( final UpdateAction < T > updateAction ) { try { delegate . update ( updateAction ) ; } catch ( FileIntegrityViolationException e ) { T newValue = updateAction . update ( null ) ; set ( newValue ) ; } } } 
