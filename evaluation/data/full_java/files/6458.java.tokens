package org . elasticsearch . index . fielddata ; import org . apache . lucene . util . Bits ; import org . apache . lucene . util . Bits . MatchAllBits ; final class SingletonSortedNumericDoubleValues extends SortedNumericDoubleValues { private final NumericDoubleValues in ; private final Bits docsWithField ; private double value ; private int count ; public SingletonSortedNumericDoubleValues ( NumericDoubleValues in , Bits docsWithField ) { this . in = in ; this . docsWithField = docsWithField instanceof MatchAllBits ? null : docsWithField ; } public NumericDoubleValues getNumericDoubleValues ( ) { return in ; } public Bits getDocsWithField ( ) { return docsWithField ; } @Override public void setDocument ( int doc ) { value = in . get ( doc ) ; if ( docsWithField ! = null & & value = = <int> & & docsWithField . get ( doc ) = = false ) { count = <int> ; } else { count = <int> ; } } @Override public double valueAt ( int index ) { return value ; } @Override public int count ( ) { return count ; } } 
