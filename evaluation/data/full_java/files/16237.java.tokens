package org . gradle . gradleplugin . userinterface . swing . common ; import javax . swing . * ; import javax . swing . plaf . metal . MetalButtonUI ; import java . awt . * ; import java . awt . event . MouseAdapter ; import java . awt . event . MouseEvent ; import java . awt . geom . Rectangle2D ; public class BorderlessImageButton extends JButton { private Color oldBackgroundColor ; public BorderlessImageButton ( Action action , Icon icon ) { super ( action ) ; setUI ( ) ; if ( action . getValue ( Action . SMALL_ICON ) ! = null ) { setText ( null ) ; } String name = ( String ) action . getValue ( action . NAME ) ; InputMap inputMap = this . getInputMap ( this . WHEN_IN_FOCUSED_WINDOW ) ; KeyStroke keyStroke = ( KeyStroke ) action . getValue ( action . ACCELERATOR_KEY ) ; inputMap . put ( keyStroke , name ) ; init ( icon ) ; } private void setUI ( ) { setUI ( MetalButtonUI . createUI ( this ) ) ; } private void init ( Icon icon ) { setBorder ( BorderlessUtility . DEFAULT_BORDER ) ; addMouseListener ( new HighlightMouseListener ( ) ) ; setText ( null ) ; if ( icon ! = null ) { setIcon ( icon ) ; int height = icon . getIconHeight ( ) ; int width = icon . getIconWidth ( ) ; Dimension preferredSize = new Dimension ( width + <int> , height + <int> ) ; setMinimumSize ( preferredSize ) ; setMaximumSize ( preferredSize ) ; setPreferredSize ( preferredSize ) ; setFocusPainted ( false ) ; } } private class HighlightMouseListener extends MouseAdapter { private HighlightMouseListener ( ) { } public void mouseEntered ( MouseEvent event ) { if ( getAction ( ) ! = null ? getAction ( ) . isEnabled ( ) : isEnabled ( ) ) { oldBackgroundColor = BorderlessImageButton . this . getBackground ( ) ; BorderlessImageButton . this . setBackground ( BorderlessUtility . ON_MOUSE_OVER_BACKGROUND ) ; BorderlessImageButton . this . setBorder ( BorderlessUtility . ON_MOUSEOVER_BORDER ) ; } } public void mousePressed ( MouseEvent event ) { if ( getAction ( ) ! = null ? getAction ( ) . isEnabled ( ) : isEnabled ( ) ) { BorderlessImageButton . this . setBackground ( BorderlessUtility . ON_BUTTON_PRESSED_BACKGROUND ) ; } } public void mouseReleased ( MouseEvent event ) { if ( getAction ( ) ! = null ? getAction ( ) . isEnabled ( ) : isEnabled ( ) ) { Rectangle2D buttonRect = BorderlessImageButton . this . getBounds ( ) ; if ( buttonRect . contains ( event . getPoint ( ) ) ) { BorderlessImageButton . this . setBackground ( BorderlessUtility . ON_MOUSE_OVER_BACKGROUND ) ; } } } public void mouseExited ( MouseEvent event ) { BorderlessImageButton . this . setBackground ( oldBackgroundColor ) ; BorderlessImageButton . this . setBorder ( BorderlessUtility . DEFAULT_BORDER ) ; } } } 
