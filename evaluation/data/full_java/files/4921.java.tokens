package org . elasticsearch . action ; import java . util . concurrent . CountDownLatch ; public class LatchedActionListener < T > implements ActionListener < T > { private final ActionListener < T > delegate ; private final CountDownLatch latch ; public LatchedActionListener ( ActionListener < T > delegate , CountDownLatch latch ) { this . delegate = delegate ; this . latch = latch ; } @Override public void onResponse ( T t ) { try { delegate . onResponse ( t ) ; } finally { latch . countDown ( ) ; } } @Override public void onFailure ( Throwable e ) { try { delegate . onFailure ( e ) ; } finally { latch . countDown ( ) ; } } } 
