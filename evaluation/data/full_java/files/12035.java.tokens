package org . gradle . initialization ; import org . gradle . api . InvalidUserDataException ; import org . gradle . api . internal . project . ProjectIdentifier ; import org . gradle . api . internal . project . ProjectRegistry ; import java . io . File ; import java . util . List ; public class ProjectDirectoryProjectSpec extends AbstractProjectSpec { private final File dir ; public ProjectDirectoryProjectSpec ( File dir ) { this . dir = dir ; } protected String formatNoMatchesMessage ( ) { return String . format ( <str> , dir ) ; } protected String formatMultipleMatchesMessage ( Iterable < ? extends ProjectIdentifier > matches ) { return String . format ( <str> , dir , matches ) ; } @Override protected < T extends ProjectIdentifier > void select ( ProjectRegistry < ? extends T > candidates , List < ? super T > matches ) { for ( T candidate : candidates . getAllProjects ( ) ) { if ( candidate . getProjectDir ( ) . equals ( dir ) ) { matches . add ( candidate ) ; } } } @Override protected void checkPreconditions ( ProjectRegistry < ? > registry ) { if ( ! dir . exists ( ) ) { throw new InvalidUserDataException ( String . format ( <str> , dir ) ) ; } if ( ! dir . isDirectory ( ) ) { throw new InvalidUserDataException ( String . format ( <str> , dir ) ) ; } } } 
