package org . elasticsearch . index . fielddata ; import org . apache . lucene . util . Bits ; import org . elasticsearch . common . geo . GeoPoint ; final class SingletonMultiGeoPointValues extends MultiGeoPointValues { private final GeoPointValues in ; private final Bits docsWithField ; private GeoPoint value ; private int count ; SingletonMultiGeoPointValues ( GeoPointValues in , Bits docsWithField ) { this . in = in ; this . docsWithField = docsWithField ; } @Override public void setDocument ( int docID ) { value = in . get ( docID ) ; if ( value . lat ( ) = = Double . NaN & & value . lon ( ) = = Double . NaN | | ( docsWithField ! = null & & ! docsWithField . get ( docID ) ) ) { count = <int> ; } else { count = <int> ; } } @Override public int count ( ) { return count ; } @Override public GeoPoint valueAt ( int index ) { assert index = = <int> ; return value ; } public GeoPointValues getGeoPointValues ( ) { return in ; } public Bits getDocsWithField ( ) { return docsWithField ; } } 
