package org . elasticsearch . http ; import org . elasticsearch . common . inject . AbstractModule ; import org . elasticsearch . common . logging . ESLogger ; import org . elasticsearch . common . logging . Loggers ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . http . netty . NettyHttpServerTransport ; import java . util . Objects ; public class HttpServerModule extends AbstractModule { private final Settings settings ; private final ESLogger logger ; private Class < ? extends HttpServerTransport > httpServerTransportClass ; public HttpServerModule ( Settings settings ) { this . settings = settings ; this . logger = Loggers . getLogger ( getClass ( ) , settings ) ; this . httpServerTransportClass = NettyHttpServerTransport . class ; } @SuppressWarnings ( { <str> } ) @Override protected void configure ( ) { bind ( HttpServerTransport . class ) . to ( httpServerTransportClass ) . asEagerSingleton ( ) ; bind ( HttpServer . class ) . asEagerSingleton ( ) ; } public void setHttpServerTransport ( Class < ? extends HttpServerTransport > httpServerTransport , String source ) { Objects . requireNonNull ( httpServerTransport , <str> ) ; Objects . requireNonNull ( source , <str> ) ; logger . info ( <str> , httpServerTransportClass . getName ( ) , source ) ; this . httpServerTransportClass = httpServerTransport ; } } 
