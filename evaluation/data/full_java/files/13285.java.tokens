package org . gradle . integtests . fixtures . jvm ; import org . gradle . api . GradleException ; import org . gradle . process . internal . ExecHandleBuilder ; import java . io . ByteArrayInputStream ; import java . io . ByteArrayOutputStream ; import java . io . File ; import java . io . InputStreamReader ; import java . util . Collection ; class OsXInstalledJvmLocator { public Collection < JvmInstallation > findJvms ( ) { try { ExecHandleBuilder execHandleBuilder = new ExecHandleBuilder ( ) ; execHandleBuilder . workingDir ( new File ( <str> ) . getAbsoluteFile ( ) ) ; execHandleBuilder . commandLine ( <str> , <str> ) ; ByteArrayOutputStream outputStream = new ByteArrayOutputStream ( ) ; execHandleBuilder . setErrorOutput ( outputStream ) ; execHandleBuilder . setStandardOutput ( new ByteArrayOutputStream ( ) ) ; execHandleBuilder . build ( ) . start ( ) . waitForFinish ( ) . assertNormalExitValue ( ) ; return new OsXJavaHomeParser ( ) . parse ( new InputStreamReader ( new ByteArrayInputStream ( outputStream . toByteArray ( ) ) ) ) ; } catch ( Exception e ) { throw new GradleException ( <str> , e ) ; } } } 
