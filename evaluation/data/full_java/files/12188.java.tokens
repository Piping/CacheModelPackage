package org . gradle . logging . internal ; import org . gradle . internal . nativeintegration . console . ConsoleMetaData ; import org . gradle . logging . internal . progress . ProgressOperation ; public class DefaultStatusBarFormatter { private final ConsoleMetaData consoleMetaData ; public DefaultStatusBarFormatter ( ConsoleMetaData consoleMetaData ) { this . consoleMetaData = consoleMetaData ; } public String format ( ProgressOperation op ) { StringBuilder builder = new StringBuilder ( ) ; ProgressOperation current = op ; while ( current ! = null ) { String message = current . getMessage ( ) ; current = current . getParent ( ) ; if ( message = = null ) { continue ; } builder . insert ( <int> , <str> ) . insert ( <int> , message ) ; } if ( builder . length ( ) > <int> ) { builder . delete ( <int> , <int> ) ; } return trim ( builder ) ; } private String trim ( StringBuilder formattedString ) { int width = consoleMetaData . getCols ( ) - <int> ; if ( width > <int> & & width < formattedString . length ( ) ) { return formattedString . substring ( <int> , width ) ; } return formattedString . toString ( ) ; } } 
