package io . netty . handler . codec . socksx . v5 ; import io . netty . buffer . ByteBuf ; import io . netty . channel . embedded . EmbeddedChannel ; final class Socks5CommonTestUtils { private Socks5CommonTestUtils ( ) { } public static void writeFromClientToServer ( EmbeddedChannel embedder , Socks5Message msg ) { embedder . writeInbound ( encodeClient ( msg ) ) ; } public static void writeFromServerToClient ( EmbeddedChannel embedder , Socks5Message msg ) { embedder . writeInbound ( encodeServer ( msg ) ) ; } public static ByteBuf encodeClient ( Socks5Message msg ) { EmbeddedChannel out = new EmbeddedChannel ( Socks5ClientEncoder . DEFAULT ) ; out . writeOutbound ( msg ) ; ByteBuf encoded = out . readOutbound ( ) ; out . finish ( ) ; return encoded ; } public static ByteBuf encodeServer ( Socks5Message msg ) { EmbeddedChannel out = new EmbeddedChannel ( Socks5ServerEncoder . DEFAULT ) ; out . writeOutbound ( msg ) ; ByteBuf encoded = out . readOutbound ( ) ; out . finish ( ) ; return encoded ; } } 
