package org . gradle . tooling . internal . provider . events ; import org . gradle . tooling . internal . protocol . InternalFailure ; import java . io . PrintWriter ; import java . io . Serializable ; import java . io . StringWriter ; import java . util . Collections ; import java . util . List ; public class DefaultFailure implements Serializable , InternalFailure { private final String message ; private final String description ; private final DefaultFailure cause ; public DefaultFailure ( String message , String description , DefaultFailure cause ) { this . message = message ; this . description = description ; this . cause = cause ; } public String getMessage ( ) { return message ; } public String getDescription ( ) { return description ; } @Override public List < ? extends InternalFailure > getCauses ( ) { return cause = = null ? Collections . < InternalFailure > emptyList ( ) : Collections . singletonList ( cause ) ; } public static DefaultFailure fromThrowable ( Throwable t ) { StringWriter out = new StringWriter ( ) ; PrintWriter wrt = new PrintWriter ( out ) ; t . printStackTrace ( wrt ) ; Throwable cause = t . getCause ( ) ; DefaultFailure causeFailure = cause ! = null & & cause ! = t ? fromThrowable ( cause ) : null ; return new DefaultFailure ( t . getMessage ( ) , out . toString ( ) , causeFailure ) ; } } 
