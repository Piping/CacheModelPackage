package org . gradle . tooling . internal . consumer . parameters ; import org . gradle . internal . event . ListenerNotificationException ; import org . gradle . tooling . internal . protocol . InternalBuildProgressListener ; import java . util . Collections ; import java . util . List ; public class FailsafeBuildProgressListenerAdapter implements InternalBuildProgressListener { private final InternalBuildProgressListener delegate ; private Throwable listenerFailure ; public FailsafeBuildProgressListenerAdapter ( InternalBuildProgressListener delegate ) { this . delegate = delegate ; } @Override public void onEvent ( Object event ) { if ( listenerFailure ! = null ) { return ; } try { delegate . onEvent ( event ) ; } catch ( Throwable t ) { listenerFailure = t ; } } @Override public List < String > getSubscribedOperations ( ) { return delegate . getSubscribedOperations ( ) ; } public void rethrowErrors ( ) { if ( listenerFailure ! = null ) { throw new ListenerNotificationException ( <str> , Collections . singletonList ( listenerFailure ) ) ; } } } 
