package org . gradle . logging . internal ; import org . gradle . api . logging . StandardOutputListener ; import java . io . Closeable ; import java . io . IOException ; public class StreamingStyledTextOutput extends AbstractStyledTextOutput implements Closeable { private final StandardOutputListener listener ; private final Closeable closeable ; public StreamingStyledTextOutput ( StandardOutputListener listener ) { this ( listener , listener ) ; } public StreamingStyledTextOutput ( final Appendable appendable ) { this ( appendable , new StreamBackedStandardOutputListener ( appendable ) ) ; } private StreamingStyledTextOutput ( Object target , StandardOutputListener listener ) { this . listener = listener ; closeable = target instanceof Closeable ? ( Closeable ) target : null ; } @Override protected void doAppend ( String text ) { listener . onOutput ( text ) ; } public void close ( ) throws IOException { if ( closeable ! = null ) { closeable . close ( ) ; } } } 
