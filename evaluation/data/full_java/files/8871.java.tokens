package org . elasticsearch . cloud . azure ; import org . elasticsearch . common . Strings ; import org . elasticsearch . common . io . PathUtils ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . common . settings . SettingsException ; import org . elasticsearch . plugin . repository . azure . AzureRepositoryPlugin ; import org . elasticsearch . plugins . Plugin ; import org . elasticsearch . test . ESIntegTestCase . ThirdParty ; import java . util . Collection ; @ThirdParty public abstract class AbstractAzureWithThirdPartyTestCase extends AbstractAzureTestCase { @Override protected Settings nodeSettings ( int nodeOrdinal ) { return Settings . builder ( ) . put ( super . nodeSettings ( nodeOrdinal ) ) . put ( readSettingsFromFile ( ) ) . build ( ) ; } @Override protected Collection < Class < ? extends Plugin > > nodePlugins ( ) { return pluginList ( AzureRepositoryPlugin . class ) ; } protected Settings readSettingsFromFile ( ) { Settings . Builder settings = Settings . builder ( ) ; try { if ( Strings . hasText ( System . getProperty ( <str> ) ) ) { settings . loadFromPath ( PathUtils . get ( ( System . getProperty ( <str> ) ) ) ) ; } else { throw new IllegalStateException ( <str> ) ; } } catch ( SettingsException exception ) { throw new IllegalStateException ( <str> + System . getProperty ( <str> ) , exception ) ; } return settings . build ( ) ; } } 
