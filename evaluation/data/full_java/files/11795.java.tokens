package org . gradle . api . tasks . ant ; import org . apache . tools . ant . Target ; import org . gradle . api . internal . ConventionTask ; import org . gradle . api . tasks . TaskAction ; import java . io . File ; public class AntTarget extends ConventionTask { private Target target ; private File baseDir ; @TaskAction protected void executeAntTarget ( ) { File oldBaseDir = target . getProject ( ) . getBaseDir ( ) ; target . getProject ( ) . setBaseDir ( baseDir ) ; try { target . performTasks ( ) ; } finally { target . getProject ( ) . setBaseDir ( oldBaseDir ) ; } } public Target getTarget ( ) { return target ; } public void setTarget ( Target target ) { this . target = target ; } public File getBaseDir ( ) { return baseDir ; } public void setBaseDir ( File baseDir ) { this . baseDir = baseDir ; } @Override public String getDescription ( ) { return target = = null ? null : target . getDescription ( ) ; } @Override public void setDescription ( String description ) { if ( target ! = null ) { target . setDescription ( description ) ; } } } 
