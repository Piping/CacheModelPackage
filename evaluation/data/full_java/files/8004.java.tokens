package org . elasticsearch . common . xcontent . support ; import org . elasticsearch . common . xcontent . XContentHelper ; import org . elasticsearch . test . ESTestCase ; import org . hamcrest . Matchers ; import java . util . Arrays ; import java . util . HashMap ; import java . util . List ; import java . util . Map ; public class XContentHelperTests extends ESTestCase { Map < String , Object > getMap ( Object . . . keyValues ) { Map < String , Object > map = new HashMap < > ( ) ; for ( int i = <int> ; i < keyValues . length ; i + + ) { map . put ( ( String ) keyValues [ i ] , keyValues [ + + i ] ) ; } return map ; } Map < String , Object > getNamedMap ( String name , Object . . . keyValues ) { Map < String , Object > map = getMap ( keyValues ) ; Map < String , Object > namedMap = new HashMap < > ( <int> ) ; namedMap . put ( name , map ) ; return namedMap ; } List < Object > getList ( Object . . . values ) { return Arrays . asList ( values ) ; } public void testMergingListValuesAreMapsOfOne ( ) { Map < String , Object > defaults = getMap ( <str> , getList ( getNamedMap ( <str> , <str> , <str> ) , getNamedMap ( <str> , <str> , <str> ) ) ) ; Map < String , Object > content = getMap ( <str> , getList ( getNamedMap ( <str> , <str> , <str> ) , getNamedMap ( <str> , <str> , <str> ) ) ) ; Map < String , Object > expected = getMap ( <str> , getList ( getNamedMap ( <str> , <str> , <str> , <str> , <str> ) , getNamedMap ( <str> , <str> , <str> ) , getNamedMap ( <str> , <str> , <str> ) ) ) ; XContentHelper . mergeDefaults ( content , defaults ) ; assertThat ( content , Matchers . equalTo ( expected ) ) ; } } 
