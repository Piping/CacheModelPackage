package org . gradle . api . internal . tasks . compile ; import org . gradle . api . tasks . WorkResult ; import org . gradle . language . base . internal . compile . Compiler ; import org . gradle . language . base . internal . tasks . StaleClassCleaner ; public abstract class CleaningJavaCompilerSupport < T extends JavaCompileSpec > implements org . gradle . language . base . internal . compile . Compiler < T > { public WorkResult execute ( T spec ) { StaleClassCleaner cleaner = createCleaner ( spec ) ; cleaner . setDestinationDir ( spec . getDestinationDir ( ) ) ; cleaner . setSource ( spec . getSource ( ) ) ; cleaner . execute ( ) ; Compiler < ? super T > compiler = getCompiler ( ) ; return compiler . execute ( spec ) ; } protected abstract Compiler < T > getCompiler ( ) ; protected abstract StaleClassCleaner createCleaner ( T spec ) ; } 
