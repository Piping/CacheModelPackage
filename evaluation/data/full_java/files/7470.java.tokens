package org . elasticsearch . search . fetch ; import org . elasticsearch . common . xcontent . XContentParser ; import org . elasticsearch . search . SearchParseElement ; import org . elasticsearch . search . internal . SearchContext ; public abstract class FetchSubPhaseParseElement < SubPhaseContext extends FetchSubPhaseContext > implements SearchParseElement { @Override final public void parse ( XContentParser parser , SearchContext context ) throws Exception { SubPhaseContext fetchSubPhaseContext = context . getFetchSubPhaseContext ( getContextFactory ( ) ) ; fetchSubPhaseContext . setHitExecutionNeeded ( true ) ; innerParse ( parser , fetchSubPhaseContext , context ) ; } protected abstract void innerParse ( XContentParser parser , SubPhaseContext fetchSubPhaseContext , SearchContext searchContext ) throws Exception ; protected abstract FetchSubPhase . ContextFactory < SubPhaseContext > getContextFactory ( ) ; } 
