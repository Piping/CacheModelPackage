package org . gradle . tooling . internal . consumer . parameters ; import org . gradle . internal . event . ListenerBroadcast ; import org . gradle . tooling . ProgressEvent ; import org . gradle . tooling . ProgressListener ; import org . gradle . tooling . internal . protocol . ProgressListenerVersion1 ; import java . util . LinkedList ; import java . util . List ; class ProgressListenerAdapter implements ProgressListenerVersion1 { private final ListenerBroadcast < ProgressListener > listeners = new ListenerBroadcast < ProgressListener > ( ProgressListener . class ) ; private final LinkedList < String > stack = new LinkedList < String > ( ) ; ProgressListenerAdapter ( List < ProgressListener > listeners ) { this . listeners . addAll ( listeners ) ; } public void onOperationStart ( final String description ) { stack . addFirst ( description = = null ? <str> : description ) ; fireChangeEvent ( ) ; } public void onOperationEnd ( ) { stack . removeFirst ( ) ; fireChangeEvent ( ) ; } private void fireChangeEvent ( ) { final String description = stack . isEmpty ( ) ? <str> : stack . getFirst ( ) ; listeners . getSource ( ) . statusChanged ( new ProgressEvent ( ) { public String getDescription ( ) { return description ; } } ) ; } } 
