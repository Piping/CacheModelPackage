package org . gradle . integtests . tooling . r18 ; import org . gradle . integtests . tooling . r16 . CustomModel ; import org . gradle . tooling . BuildAction ; import org . gradle . tooling . BuildController ; import org . gradle . tooling . model . gradle . BasicGradleProject ; import org . gradle . tooling . model . gradle . GradleBuild ; import java . util . HashMap ; import java . util . Map ; public class UseGradleBuildToFetchProjectModel implements BuildAction < Map < String , CustomModel > > { public Map < String , CustomModel > execute ( BuildController controller ) { GradleBuild gradleBuild = controller . getBuildModel ( ) ; Map < String , CustomModel > projects = new HashMap < String , CustomModel > ( ) ; for ( BasicGradleProject project : gradleBuild . getProjects ( ) ) { projects . put ( project . getName ( ) , controller . getModel ( project , CustomModel . class ) ) ; } return projects ; } } 
