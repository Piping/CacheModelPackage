package org . elasticsearch . index . query ; import org . elasticsearch . common . io . stream . BytesStreamOutput ; import org . elasticsearch . common . io . stream . StreamInput ; import org . elasticsearch . common . lucene . search . function . FiltersFunctionScoreQuery ; import org . elasticsearch . test . ESTestCase ; import static org . hamcrest . Matchers . equalTo ; public class ScoreModeTests extends ESTestCase { public void testValidOrdinals ( ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . FIRST . ordinal ( ) , equalTo ( <int> ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . AVG . ordinal ( ) , equalTo ( <int> ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . MAX . ordinal ( ) , equalTo ( <int> ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . SUM . ordinal ( ) , equalTo ( <int> ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . MIN . ordinal ( ) , equalTo ( <int> ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . MULTIPLY . ordinal ( ) , equalTo ( <int> ) ) ; } public void testWriteTo ( ) throws Exception { try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { FiltersFunctionScoreQuery . ScoreMode . FIRST . writeTo ( out ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( in . readVInt ( ) , equalTo ( <int> ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { FiltersFunctionScoreQuery . ScoreMode . AVG . writeTo ( out ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( in . readVInt ( ) , equalTo ( <int> ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { FiltersFunctionScoreQuery . ScoreMode . MAX . writeTo ( out ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( in . readVInt ( ) , equalTo ( <int> ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { FiltersFunctionScoreQuery . ScoreMode . SUM . writeTo ( out ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( in . readVInt ( ) , equalTo ( <int> ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { FiltersFunctionScoreQuery . ScoreMode . MIN . writeTo ( out ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( in . readVInt ( ) , equalTo ( <int> ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { FiltersFunctionScoreQuery . ScoreMode . MULTIPLY . writeTo ( out ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( in . readVInt ( ) , equalTo ( <int> ) ) ; } } } public void testReadFrom ( ) throws Exception { try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { out . writeVInt ( <int> ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . readScoreModeFrom ( in ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . FIRST ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { out . writeVInt ( <int> ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . readScoreModeFrom ( in ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . AVG ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { out . writeVInt ( <int> ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . readScoreModeFrom ( in ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . MAX ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { out . writeVInt ( <int> ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . readScoreModeFrom ( in ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . SUM ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { out . writeVInt ( <int> ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . readScoreModeFrom ( in ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . MIN ) ) ; } } try ( BytesStreamOutput out = new BytesStreamOutput ( ) ) { out . writeVInt ( <int> ) ; try ( StreamInput in = StreamInput . wrap ( out . bytes ( ) ) ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . readScoreModeFrom ( in ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . MULTIPLY ) ) ; } } } public void testFromString ( ) { assertThat ( FiltersFunctionScoreQuery . ScoreMode . fromString ( <str> ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . FIRST ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . fromString ( <str> ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . AVG ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . fromString ( <str> ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . MAX ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . fromString ( <str> ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . SUM ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . fromString ( <str> ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . MIN ) ) ; assertThat ( FiltersFunctionScoreQuery . ScoreMode . fromString ( <str> ) , equalTo ( FiltersFunctionScoreQuery . ScoreMode . MULTIPLY ) ) ; } } 
