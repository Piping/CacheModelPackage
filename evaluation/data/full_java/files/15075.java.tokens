package org . gradle . nativeplatform . toolchain . internal . msvcpp ; import com . google . common . collect . Lists ; import org . gradle . nativeplatform . toolchain . internal . ArgsTransformer ; import org . gradle . nativeplatform . toolchain . internal . MacroArgsConverter ; import org . gradle . nativeplatform . toolchain . internal . NativeCompileSpec ; import java . io . File ; import java . util . List ; import static org . gradle . nativeplatform . toolchain . internal . msvcpp . EscapeUserArgs . escapeUserArg ; import static org . gradle . nativeplatform . toolchain . internal . msvcpp . EscapeUserArgs . escapeUserArgs ; abstract class VisualCppCompilerArgsTransformer < T extends NativeCompileSpec > implements ArgsTransformer < T > { public List < String > transform ( T spec ) { List < String > args = Lists . newArrayList ( ) ; addToolSpecificArgs ( spec , args ) ; addMacroArgs ( spec , args ) ; addUserArgs ( spec , args ) ; addIncludeArgs ( spec , args ) ; return args ; } private void addUserArgs ( T spec , List < String > args ) { args . addAll ( escapeUserArgs ( spec . getAllArgs ( ) ) ) ; } protected void addToolSpecificArgs ( T spec , List < String > args ) { args . add ( getLanguageOption ( ) ) ; args . add ( <str> ) ; args . add ( <str> ) ; } protected void addIncludeArgs ( T spec , List < String > args ) { for ( File file : spec . getIncludeRoots ( ) ) { args . add ( <str> + file . getAbsolutePath ( ) ) ; } } protected void addMacroArgs ( T spec , List < String > args ) { for ( String macroArg : new MacroArgsConverter ( ) . transform ( spec . getMacros ( ) ) ) { args . add ( escapeUserArg ( <str> + macroArg ) ) ; } } protected String getLanguageOption ( ) { return <str> ; } } 
