package org . gradle . internal . nativeintegration . filesystem . jdk7 ; import org . gradle . internal . nativeintegration . filesystem . FileModeAccessor ; import org . gradle . internal . nativeintegration . filesystem . FileModeMutator ; import java . io . File ; import java . io . IOException ; import java . nio . file . Files ; import java . nio . file . attribute . PosixFileAttributeView ; import java . nio . file . attribute . PosixFileAttributes ; import static org . gradle . internal . nativeintegration . filesystem . jdk7 . PosixFilePermissionConverter . convertToInt ; import static org . gradle . internal . nativeintegration . filesystem . jdk7 . PosixFilePermissionConverter . convertToPermissionsSet ; public class PosixJdk7FilePermissionHandler implements FileModeAccessor , FileModeMutator { public int getUnixMode ( File file ) throws IOException { final PosixFileAttributes posixFileAttributes = Files . readAttributes ( file . toPath ( ) , PosixFileAttributes . class ) ; return convertToInt ( posixFileAttributes . permissions ( ) ) ; } public void chmod ( File f , int mode ) throws IOException { PosixFileAttributeView fileAttributeView = Files . getFileAttributeView ( f . toPath ( ) , PosixFileAttributeView . class ) ; fileAttributeView . setPermissions ( convertToPermissionsSet ( mode ) ) ; } } 
