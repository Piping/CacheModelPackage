package com . nostra13 . universalimageloader . core . display ; import android . graphics . * ; import com . nostra13 . universalimageloader . core . assist . LoadedFrom ; import com . nostra13 . universalimageloader . core . imageaware . ImageAware ; import com . nostra13 . universalimageloader . core . imageaware . ImageViewAware ; public class RoundedVignetteBitmapDisplayer extends RoundedBitmapDisplayer { public RoundedVignetteBitmapDisplayer ( int cornerRadiusPixels , int marginPixels ) { super ( cornerRadiusPixels , marginPixels ) ; } @Override public void display ( Bitmap bitmap , ImageAware imageAware , LoadedFrom loadedFrom ) { if ( ! ( imageAware instanceof ImageViewAware ) ) { throw new IllegalArgumentException ( <str> ) ; } imageAware . setImageDrawable ( new RoundedVignetteDrawable ( bitmap , cornerRadius , margin ) ) ; } protected static class RoundedVignetteDrawable extends RoundedDrawable { RoundedVignetteDrawable ( Bitmap bitmap , int cornerRadius , int margin ) { super ( bitmap , cornerRadius , margin ) ; } @Override protected void onBoundsChange ( Rect bounds ) { super . onBoundsChange ( bounds ) ; RadialGradient vignette = new RadialGradient ( mRect . centerX ( ) , mRect . centerY ( ) * <float> / <float> , mRect . centerX ( ) * <float> , new int [ ] { <int> , <int> , <hex> } , new float [ ] { <float> , <float> , <float> } , Shader . TileMode . CLAMP ) ; Matrix oval = new Matrix ( ) ; oval . setScale ( <float> , <float> ) ; vignette . setLocalMatrix ( oval ) ; paint . setShader ( new ComposeShader ( bitmapShader , vignette , PorterDuff . Mode . SRC_OVER ) ) ; } } } 
