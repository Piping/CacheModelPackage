package org . gradle . plugin . use . resolve . service . internal ; import net . jcip . annotations . ThreadSafe ; import org . gradle . api . Nullable ; import org . gradle . plugin . use . internal . PluginRequest ; import java . io . Closeable ; @ThreadSafe public interface PluginResolutionServiceClient extends Closeable { Response < PluginUseMetaData > queryPluginMetadata ( String portalUrl , boolean shouldValidate , PluginRequest pluginRequest ) ; Response < ClientStatus > queryClientStatus ( String portalUrl , boolean shouldValidate , @Nullable String checksum ) ; public static interface Response < T > { boolean isError ( ) ; int getStatusCode ( ) ; ErrorResponse getErrorResponse ( ) ; T getResponse ( ) ; String getUrl ( ) ; @Nullable String getClientStatusChecksum ( ) ; } public static class ErrorResponseResponse < T > implements Response < T > { private final ErrorResponse errorResponse ; private final int statusCode ; private final String url ; private final String clientStatusChecksum ; public ErrorResponseResponse ( ErrorResponse errorResponse , int statusCode , String url , String clientStatusChecksum ) { this . errorResponse = errorResponse ; this . statusCode = statusCode ; this . url = url ; this . clientStatusChecksum = clientStatusChecksum ; } public String getUrl ( ) { return url ; } public String getClientStatusChecksum ( ) { return clientStatusChecksum ; } public boolean isError ( ) { return true ; } public int getStatusCode ( ) { return statusCode ; } public ErrorResponse getErrorResponse ( ) { return errorResponse ; } public T getResponse ( ) { return null ; } } public static class SuccessResponse < T > implements Response < T > { private final T response ; private final int statusCode ; private final String url ; private final String clientStatusChecksum ; public SuccessResponse ( T response , int statusCode , String url , String clientStatusChecksum ) { this . response = response ; this . statusCode = statusCode ; this . url = url ; this . clientStatusChecksum = clientStatusChecksum ; } public String getUrl ( ) { return url ; } public String getClientStatusChecksum ( ) { return clientStatusChecksum ; } public boolean isError ( ) { return false ; } public int getStatusCode ( ) { return statusCode ; } public ErrorResponse getErrorResponse ( ) { return null ; } public T getResponse ( ) { return response ; } } } 
