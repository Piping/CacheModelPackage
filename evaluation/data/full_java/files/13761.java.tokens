package org . gradle . launcher . cli ; import org . gradle . api . Action ; import org . gradle . launcher . bootstrap . ExecutionListener ; import org . gradle . initialization . ReportedException ; public class ExceptionReportingAction implements Action < ExecutionListener > { private final Action < ExecutionListener > action ; private final Action < Throwable > reporter ; public ExceptionReportingAction ( Action < ExecutionListener > action , Action < Throwable > reporter ) { this . action = action ; this . reporter = reporter ; } public void execute ( ExecutionListener executionListener ) { try { action . execute ( executionListener ) ; } catch ( ReportedException e ) { executionListener . onFailure ( e . getCause ( ) ) ; } catch ( Throwable t ) { reporter . execute ( t ) ; executionListener . onFailure ( t ) ; } } } 
