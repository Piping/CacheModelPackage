package io . netty . buffer ; import org . junit . Assert ; import org . junit . Test ; public class UnreleaseableByteBufTest { @Test public void testCantRelease ( ) { ByteBuf buf = Unpooled . unreleasableBuffer ( Unpooled . copyInt ( <int> ) ) ; Assert . assertEquals ( <int> , buf . refCnt ( ) ) ; Assert . assertFalse ( buf . release ( ) ) ; Assert . assertEquals ( <int> , buf . refCnt ( ) ) ; Assert . assertFalse ( buf . release ( ) ) ; Assert . assertEquals ( <int> , buf . refCnt ( ) ) ; buf . retain ( <int> ) ; Assert . assertEquals ( <int> , buf . refCnt ( ) ) ; buf . retain ( ) ; Assert . assertEquals ( <int> , buf . refCnt ( ) ) ; Assert . assertTrue ( buf . unwrap ( ) . release ( ) ) ; Assert . assertEquals ( <int> , buf . refCnt ( ) ) ; } } 
