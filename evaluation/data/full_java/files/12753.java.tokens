package org . gradle . api . internal . artifacts . repositories . resolver ; import org . apache . ivy . core . IvyPatternHelper ; import org . gradle . api . artifacts . ModuleIdentifier ; import org . gradle . api . artifacts . component . ModuleComponentIdentifier ; import org . gradle . internal . component . external . model . ModuleComponentArtifactMetaData ; import org . gradle . internal . component . model . IvyArtifactName ; import org . gradle . internal . resource . ExternalResourceName ; import java . net . URI ; import java . util . HashMap ; import java . util . Map ; abstract class AbstractResourcePattern implements ResourcePattern { private final ExternalResourceName pattern ; public AbstractResourcePattern ( String pattern ) { this . pattern = new ExternalResourceName ( pattern ) ; } public AbstractResourcePattern ( URI baseUri , String pattern ) { this . pattern = new ExternalResourceName ( baseUri , pattern ) ; } public String getPattern ( ) { return pattern . getDecoded ( ) ; } protected ExternalResourceName getBase ( ) { return pattern ; } protected String substituteTokens ( String pattern , Map < String , String > attributes ) { return IvyPatternHelper . substituteTokens ( pattern , attributes ) ; } protected Map < String , String > toAttributes ( ModuleComponentArtifactMetaData artifact ) { Map < String , String > attributes = toAttributes ( artifact . getId ( ) . getComponentIdentifier ( ) ) ; attributes . putAll ( toAttributes ( artifact . getName ( ) ) ) ; return attributes ; } protected Map < String , String > toAttributes ( ModuleIdentifier module , IvyArtifactName ivyArtifactName ) { Map < String , String > attributes = toAttributes ( module ) ; attributes . putAll ( toAttributes ( ivyArtifactName ) ) ; return attributes ; } protected Map < String , String > toAttributes ( IvyArtifactName ivyArtifact ) { HashMap < String , String > attributes = new HashMap < String , String > ( ) ; attributes . put ( IvyPatternHelper . ARTIFACT_KEY , ivyArtifact . getName ( ) ) ; attributes . put ( IvyPatternHelper . TYPE_KEY , ivyArtifact . getType ( ) ) ; attributes . put ( IvyPatternHelper . EXT_KEY , ivyArtifact . getExtension ( ) ) ; attributes . put ( <str> , ivyArtifact . getClassifier ( ) ) ; return attributes ; } protected Map < String , String > toAttributes ( ModuleIdentifier module ) { HashMap < String , String > attributes = new HashMap < String , String > ( ) ; attributes . put ( IvyPatternHelper . ORGANISATION_KEY , module . getGroup ( ) ) ; attributes . put ( IvyPatternHelper . MODULE_KEY , module . getName ( ) ) ; return attributes ; } protected Map < String , String > toAttributes ( ModuleComponentIdentifier componentIdentifier ) { HashMap < String , String > attributes = new HashMap < String , String > ( ) ; attributes . put ( IvyPatternHelper . ORGANISATION_KEY , componentIdentifier . getGroup ( ) ) ; attributes . put ( IvyPatternHelper . MODULE_KEY , componentIdentifier . getModule ( ) ) ; attributes . put ( IvyPatternHelper . REVISION_KEY , componentIdentifier . getVersion ( ) ) ; return attributes ; } } 
