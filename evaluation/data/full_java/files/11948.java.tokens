package org . gradle . groovy . scripts ; import org . apache . commons . lang . StringUtils ; import org . gradle . internal . hash . HashUtil ; import java . net . URI ; public abstract class AbstractUriScriptSource implements ScriptSource { private String className ; public String getClassName ( ) { if ( className = = null ) { URI sourceUri = getResource ( ) . getURI ( ) ; String name = StringUtils . substringBeforeLast ( StringUtils . substringAfterLast ( sourceUri . toString ( ) , <str> ) , <str> ) ; StringBuilder className = new StringBuilder ( name . length ( ) ) ; for ( int i = <int> ; i < name . length ( ) ; i + + ) { char ch = name . charAt ( i ) ; if ( Character . isJavaIdentifierPart ( ch ) ) { className . append ( ch ) ; } else { className . append ( <str> ) ; } } if ( ! Character . isJavaIdentifierStart ( className . charAt ( <int> ) ) ) { className . insert ( <int> , <str> ) ; } className . setLength ( Math . min ( className . length ( ) , <int> ) ) ; className . append ( <str> ) ; String path = sourceUri . toString ( ) ; className . append ( HashUtil . createCompactMD5 ( path ) ) ; this . className = className . toString ( ) ; } return className ; } } 
