package org . gradle . internal . resource . local ; import org . gradle . api . Action ; import java . io . File ; import java . util . Set ; public class PathNormalisingKeyFileStore implements FileStore < String > , FileStoreSearcher < String > { private final PathKeyFileStore delegate ; public PathNormalisingKeyFileStore ( File baseDir ) { this ( new PathKeyFileStore ( baseDir ) ) ; } public PathNormalisingKeyFileStore ( PathKeyFileStore delegate ) { this . delegate = delegate ; } public LocallyAvailableResource move ( String key , File source ) { return delegate . move ( normalizePath ( key ) , source ) ; } public LocallyAvailableResource copy ( String key , File source ) { return delegate . copy ( key , source ) ; } protected String normalizePath ( String path ) { return path . replaceAll ( <str> , <str> ) ; } protected String normalizeSearchPath ( String path ) { return path . replaceAll ( <str> , <str> ) ; } public void moveFilestore ( File destination ) { delegate . moveFilestore ( destination ) ; } public LocallyAvailableResource add ( String key , Action < File > addAction ) { return delegate . add ( normalizePath ( key ) , addAction ) ; } public Set < ? extends LocallyAvailableResource > search ( String key ) { return delegate . search ( normalizeSearchPath ( key ) ) ; } } 
