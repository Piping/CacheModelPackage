package org . eclipse . debug . internal . ui . actions . expressions ; import java . util . Iterator ; import org . eclipse . debug . core . DebugPlugin ; import org . eclipse . debug . core . IExpressionManager ; import org . eclipse . debug . core . model . IExpression ; import org . eclipse . debug . core . model . IWatchExpression ; import org . eclipse . jface . action . IAction ; import org . eclipse . jface . viewers . IStructuredSelection ; public class ConvertToWatchExpressionAction extends WatchExpressionAction { @Override public void run ( IAction action ) { IStructuredSelection selection = getCurrentSelection ( ) ; IExpressionManager expressionManager = DebugPlugin . getDefault ( ) . getExpressionManager ( ) ; for ( Iterator < ? > iter = selection . iterator ( ) ; iter . hasNext ( ) ; ) { IExpression expression = ( IExpression ) iter . next ( ) ; IWatchExpression watchExpression = expressionManager . newWatchExpression ( expression . getExpressionText ( ) ) ; expressionManager . removeExpression ( expression ) ; expressionManager . addExpression ( watchExpression ) ; watchExpression . setExpressionContext ( getContext ( ) ) ; } } } 
