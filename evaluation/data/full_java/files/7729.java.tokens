package org . elasticsearch . action . admin . indices . delete ; import org . elasticsearch . test . ESIntegTestCase ; import org . elasticsearch . test . ESIntegTestCase . ClusterScope ; import static org . elasticsearch . test . hamcrest . ElasticsearchAssertions . assertBlocked ; @ClusterScope ( scope = ESIntegTestCase . Scope . TEST ) public class DeleteIndexBlocksIT extends ESIntegTestCase { public void testDeleteIndexWithBlocks ( ) { createIndex ( <str> ) ; ensureGreen ( <str> ) ; try { setClusterReadOnly ( true ) ; assertBlocked ( client ( ) . admin ( ) . indices ( ) . prepareDelete ( <str> ) ) ; } finally { setClusterReadOnly ( false ) ; } } } 
