package org . elasticsearch . index . flush ; import org . elasticsearch . common . io . stream . StreamInput ; import org . elasticsearch . common . io . stream . StreamOutput ; import org . elasticsearch . common . io . stream . Streamable ; import org . elasticsearch . common . unit . TimeValue ; import org . elasticsearch . common . xcontent . ToXContent ; import org . elasticsearch . common . xcontent . XContentBuilder ; import org . elasticsearch . common . xcontent . XContentBuilderString ; import java . io . IOException ; public class FlushStats implements Streamable , ToXContent { private long total ; private long totalTimeInMillis ; public FlushStats ( ) { } public FlushStats ( long total , long totalTimeInMillis ) { this . total = total ; this . totalTimeInMillis = totalTimeInMillis ; } public void add ( long total , long totalTimeInMillis ) { this . total + = total ; this . totalTimeInMillis + = totalTimeInMillis ; } public void add ( FlushStats flushStats ) { addTotals ( flushStats ) ; } public void addTotals ( FlushStats flushStats ) { if ( flushStats = = null ) { return ; } this . total + = flushStats . total ; this . totalTimeInMillis + = flushStats . totalTimeInMillis ; } public long getTotal ( ) { return this . total ; } public long getTotalTimeInMillis ( ) { return this . totalTimeInMillis ; } public TimeValue getTotalTime ( ) { return new TimeValue ( totalTimeInMillis ) ; } public static FlushStats readFlushStats ( StreamInput in ) throws IOException { FlushStats flushStats = new FlushStats ( ) ; flushStats . readFrom ( in ) ; return flushStats ; } @Override public XContentBuilder toXContent ( XContentBuilder builder , Params params ) throws IOException { builder . startObject ( Fields . FLUSH ) ; builder . field ( Fields . TOTAL , total ) ; builder . timeValueField ( Fields . TOTAL_TIME_IN_MILLIS , Fields . TOTAL_TIME , totalTimeInMillis ) ; builder . endObject ( ) ; return builder ; } static final class Fields { static final XContentBuilderString FLUSH = new XContentBuilderString ( <str> ) ; static final XContentBuilderString TOTAL = new XContentBuilderString ( <str> ) ; static final XContentBuilderString TOTAL_TIME = new XContentBuilderString ( <str> ) ; static final XContentBuilderString TOTAL_TIME_IN_MILLIS = new XContentBuilderString ( <str> ) ; } @Override public void readFrom ( StreamInput in ) throws IOException { total = in . readVLong ( ) ; totalTimeInMillis = in . readVLong ( ) ; } @Override public void writeTo ( StreamOutput out ) throws IOException { out . writeVLong ( total ) ; out . writeVLong ( totalTimeInMillis ) ; } } 
