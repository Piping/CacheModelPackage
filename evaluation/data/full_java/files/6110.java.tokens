package org . elasticsearch . common . util . concurrent ; public abstract class AbstractRunnable implements Runnable { public boolean isForceExecution ( ) { return false ; } @Override public final void run ( ) { try { doRun ( ) ; } catch ( Throwable t ) { onFailure ( t ) ; } finally { onAfter ( ) ; } } public void onAfter ( ) { } public abstract void onFailure ( Throwable t ) ; public void onRejection ( Throwable t ) { onFailure ( t ) ; } protected abstract void doRun ( ) throws Exception ; } 
