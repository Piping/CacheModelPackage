package org . elasticsearch . index . analysis ; import org . apache . lucene . analysis . TokenStream ; import org . apache . lucene . analysis . miscellaneous . TruncateTokenFilter ; import org . elasticsearch . env . Environment ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . index . IndexSettings ; public class TruncateTokenFilterFactory extends AbstractTokenFilterFactory { private final int length ; public TruncateTokenFilterFactory ( IndexSettings indexSettings , Environment environment , String name , Settings settings ) { super ( indexSettings , name , settings ) ; this . length = settings . getAsInt ( <str> , - <int> ) ; if ( length < = <int> ) { throw new IllegalArgumentException ( <str> ) ; } } @Override public TokenStream create ( TokenStream tokenStream ) { return new TruncateTokenFilter ( tokenStream , length ) ; } } 
