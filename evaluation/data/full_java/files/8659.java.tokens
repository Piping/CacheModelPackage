package org . elasticsearch . index . analysis ; import com . ibm . icu . text . Transliterator ; import org . apache . lucene . analysis . TokenStream ; import org . apache . lucene . analysis . icu . ICUTransformFilter ; import org . elasticsearch . common . inject . Inject ; import org . elasticsearch . common . inject . assistedinject . Assisted ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . env . Environment ; import org . elasticsearch . index . IndexSettings ; public class IcuTransformTokenFilterFactory extends AbstractTokenFilterFactory { private final String id ; private final int dir ; private final Transliterator transliterator ; @Inject public IcuTransformTokenFilterFactory ( IndexSettings indexSettings , Environment environment , String name , Settings settings ) { super ( indexSettings , name , settings ) ; this . id = settings . get ( <str> , <str> ) ; String s = settings . get ( <str> , <str> ) ; this . dir = <str> . equals ( s ) ? Transliterator . FORWARD : Transliterator . REVERSE ; this . transliterator = Transliterator . getInstance ( id , dir ) ; } @Override public TokenStream create ( TokenStream tokenStream ) { return new ICUTransformFilter ( tokenStream , transliterator ) ; } } 
