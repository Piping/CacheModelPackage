package org . gradle . api ; import groovy . lang . Closure ; import org . gradle . util . CollectionUtils ; import java . util . List ; public class InvalidActionClosureException extends GradleException { private final Closure < ? > closure ; private final Object argument ; public InvalidActionClosureException ( Closure < ? > closure , Object argument ) { super ( toMessage ( closure , argument ) ) ; this . closure = closure ; this . argument = argument ; } private static String toMessage ( Closure < ? > closure , Object argument ) { List < Object > classNames = CollectionUtils . collect ( closure . getParameterTypes ( ) , new Transformer < Object , Class > ( ) { public Object transform ( Class clazz ) { return clazz . getName ( ) ; } } ) ; return String . format ( <str> , closure , argument , argument . getClass ( ) . getName ( ) , CollectionUtils . join ( <str> , classNames ) ) ; } public Closure < ? > getClosure ( ) { return closure ; } public Object getArgument ( ) { return argument ; } } 
