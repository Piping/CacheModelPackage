package org . elasticsearch . discovery . azure ; import org . elasticsearch . cloud . azure . AbstractAzureComputeServiceTestCase ; import org . elasticsearch . cloud . azure . AzureComputeServiceTwoNodesMock ; import org . elasticsearch . cloud . azure . management . AzureComputeService . Discovery ; import org . elasticsearch . cloud . azure . management . AzureComputeService . Management ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . test . ESIntegTestCase ; import static org . hamcrest . Matchers . notNullValue ; @ESIntegTestCase.ClusterScope ( scope = ESIntegTestCase . Scope . TEST , numDataNodes = <int> , transportClientRatio = <float> , numClientNodes = <int> ) public class AzureTwoStartedNodesTests extends AbstractAzureComputeServiceTestCase { public AzureTwoStartedNodesTests ( ) { super ( AzureComputeServiceTwoNodesMock . TestPlugin . class ) ; } @AwaitsFix ( bugUrl = <str> ) public void testTwoNodesShouldRunUsingPrivateIp ( ) { Settings . Builder settings = Settings . settingsBuilder ( ) . put ( Management . SERVICE_NAME , <str> ) . put ( Discovery . HOST_TYPE , <str> ) ; logger . info ( <str> ) ; internalCluster ( ) . startNode ( settings ) ; assertThat ( client ( ) . admin ( ) . cluster ( ) . prepareState ( ) . setMasterNodeTimeout ( <str> ) . execute ( ) . actionGet ( ) . getState ( ) . nodes ( ) . masterNodeId ( ) , notNullValue ( ) ) ; logger . info ( <str> ) ; internalCluster ( ) . startNode ( settings ) ; assertThat ( client ( ) . admin ( ) . cluster ( ) . prepareState ( ) . setMasterNodeTimeout ( <str> ) . execute ( ) . actionGet ( ) . getState ( ) . nodes ( ) . masterNodeId ( ) , notNullValue ( ) ) ; checkNumberOfNodes ( <int> ) ; } @AwaitsFix ( bugUrl = <str> ) public void testTwoNodesShouldRunUsingPublicIp ( ) { Settings . Builder settings = Settings . settingsBuilder ( ) . put ( Management . SERVICE_NAME , <str> ) . put ( Discovery . HOST_TYPE , <str> ) ; logger . info ( <str> ) ; internalCluster ( ) . startNode ( settings ) ; assertThat ( client ( ) . admin ( ) . cluster ( ) . prepareState ( ) . setMasterNodeTimeout ( <str> ) . execute ( ) . actionGet ( ) . getState ( ) . nodes ( ) . masterNodeId ( ) , notNullValue ( ) ) ; logger . info ( <str> ) ; internalCluster ( ) . startNode ( settings ) ; assertThat ( client ( ) . admin ( ) . cluster ( ) . prepareState ( ) . setMasterNodeTimeout ( <str> ) . execute ( ) . actionGet ( ) . getState ( ) . nodes ( ) . masterNodeId ( ) , notNullValue ( ) ) ; checkNumberOfNodes ( <int> ) ; } } 
