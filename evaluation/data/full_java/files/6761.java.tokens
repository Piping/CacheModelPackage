package org . elasticsearch . index . shard ; import org . apache . lucene . index . * ; import org . elasticsearch . common . Nullable ; import org . elasticsearch . common . lucene . index . ElasticsearchDirectoryReader ; import org . elasticsearch . common . lucene . index . ElasticsearchLeafReader ; public final class ShardUtils { private ShardUtils ( ) { } @Nullable public static ShardId extractShardId ( LeafReader reader ) { final ElasticsearchLeafReader esReader = ElasticsearchLeafReader . getElasticsearchLeafReader ( reader ) ; if ( esReader ! = null ) { assert reader . getRefCount ( ) > <int> : <str> ; return esReader . shardId ( ) ; } return null ; } @Nullable public static ShardId extractShardId ( DirectoryReader reader ) { final ElasticsearchDirectoryReader esReader = ElasticsearchDirectoryReader . getElasticsearchDirectoryReader ( reader ) ; if ( esReader ! = null ) { return esReader . shardId ( ) ; } throw new IllegalArgumentException ( <str> ) ; } } 
