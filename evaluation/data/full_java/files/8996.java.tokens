package org . elasticsearch . test . engine ; import org . apache . lucene . index . AssertingDirectoryReader ; import org . apache . lucene . index . FilterDirectoryReader ; import org . apache . lucene . search . AssertingIndexSearcher ; import org . apache . lucene . search . IndexSearcher ; import org . apache . lucene . search . SearcherManager ; import org . elasticsearch . index . engine . EngineConfig ; import org . elasticsearch . index . engine . EngineException ; import org . elasticsearch . index . engine . ShadowEngine ; import java . io . IOException ; import java . util . Map ; final class MockShadowEngine extends ShadowEngine { private final MockEngineSupport support ; MockShadowEngine ( EngineConfig config , Class < ? extends FilterDirectoryReader > wrapper ) { super ( config ) ; this . support = new MockEngineSupport ( config , wrapper ) ; } @Override protected Searcher newSearcher ( String source , IndexSearcher searcher , SearcherManager manager ) throws EngineException { final Searcher engineSearcher = super . newSearcher ( source , searcher , manager ) ; return support . wrapSearcher ( source , engineSearcher , searcher , manager ) ; } } 
