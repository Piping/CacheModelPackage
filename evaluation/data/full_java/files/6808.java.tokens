package org . elasticsearch . index . translog ; import java . io . IOException ; import java . nio . ByteBuffer ; @Deprecated class LegacyTranslogReaderBase extends ImmutableTranslogReader { LegacyTranslogReaderBase ( long generation , ChannelReference channelReference , long firstOperationOffset , long fileLength ) { super ( generation , channelReference , firstOperationOffset , fileLength , TranslogReader . UNKNOWN_OP_COUNT ) ; } @Override protected Translog . Snapshot newReaderSnapshot ( final int totalOperations , ByteBuffer reusableBuffer ) { assert totalOperations = = - <int> : <str> + totalOperations ; return new ReaderSnapshot ( totalOperations , reusableBuffer ) { @Override public Translog . Operation next ( ) throws IOException { if ( position > = sizeInBytes ( ) ) { return null ; } try { return readOperation ( ) ; } catch ( TruncatedTranslogException ex ) { return null ; } } } ; } @Override protected ImmutableTranslogReader newReader ( long generation , ChannelReference channelReference , long firstOperationOffset , long length , int totalOperations ) { assert totalOperations = = - <int> : <str> + totalOperations ; return new LegacyTranslogReaderBase ( generation , channelReference , firstOperationOffset , length ) ; } } 
