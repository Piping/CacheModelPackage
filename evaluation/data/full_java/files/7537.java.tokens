package org . elasticsearch . search . lookup ; import org . apache . lucene . index . LeafReaderContext ; import java . util . HashMap ; import java . util . Map ; import static java . util . Collections . unmodifiableMap ; public class LeafSearchLookup { final LeafReaderContext ctx ; final LeafDocLookup docMap ; final SourceLookup sourceLookup ; final LeafFieldsLookup fieldsLookup ; final LeafIndexLookup indexLookup ; final Map < String , Object > asMap ; public LeafSearchLookup ( LeafReaderContext ctx , LeafDocLookup docMap , SourceLookup sourceLookup , LeafFieldsLookup fieldsLookup , LeafIndexLookup indexLookup , Map < String , Object > topLevelMap ) { this . ctx = ctx ; this . docMap = docMap ; this . sourceLookup = sourceLookup ; this . fieldsLookup = fieldsLookup ; this . indexLookup = indexLookup ; Map < String , Object > asMap = new HashMap < > ( topLevelMap . size ( ) + <int> ) ; asMap . putAll ( topLevelMap ) ; asMap . put ( <str> , docMap ) ; asMap . put ( <str> , docMap ) ; asMap . put ( <str> , sourceLookup ) ; asMap . put ( <str> , fieldsLookup ) ; asMap . put ( <str> , indexLookup ) ; this . asMap = unmodifiableMap ( asMap ) ; } public Map < String , Object > asMap ( ) { return this . asMap ; } public SourceLookup source ( ) { return this . sourceLookup ; } public LeafIndexLookup indexLookup ( ) { return this . indexLookup ; } public LeafFieldsLookup fields ( ) { return this . fieldsLookup ; } public LeafDocLookup doc ( ) { return this . docMap ; } public void setDocument ( int docId ) { docMap . setDocument ( docId ) ; sourceLookup . setSegmentAndDocument ( ctx , docId ) ; fieldsLookup . setDocument ( docId ) ; indexLookup . setDocument ( docId ) ; } } 
