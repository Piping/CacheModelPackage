package org . elasticsearch . cluster . routing ; import org . apache . lucene . util . CollectionUtil ; import java . util . * ; public class GroupShardsIterator implements Iterable < ShardIterator > { private final List < ShardIterator > iterators ; public GroupShardsIterator ( List < ShardIterator > iterators ) { CollectionUtil . timSort ( iterators ) ; this . iterators = iterators ; } public int totalSize ( ) { int size = <int> ; for ( ShardIterator shard : iterators ) { size + = shard . size ( ) ; } return size ; } public int totalSizeWith1ForEmpty ( ) { int size = <int> ; for ( ShardIterator shard : iterators ) { int sizeActive = shard . size ( ) ; if ( sizeActive = = <int> ) { size + = <int> ; } else { size + = sizeActive ; } } return size ; } public int size ( ) { return iterators . size ( ) ; } @Override public Iterator < ShardIterator > iterator ( ) { return iterators . iterator ( ) ; } } 
