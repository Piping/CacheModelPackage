package org . gradle . internal . serialize ; public class ObjectArraySerializer implements Serializer < Object [ ] > { private final Serializer < Object > elementSerializer ; public ObjectArraySerializer ( Serializer < Object > elementSerializer ) { this . elementSerializer = elementSerializer ; } @Override public void write ( Encoder encoder , Object [ ] value ) throws Exception { encoder . writeSmallInt ( value . length ) ; for ( int i = <int> ; i < value . length ; i + + ) { elementSerializer . write ( encoder , value [ i ] ) ; } } @Override public Object [ ] read ( Decoder decoder ) throws Exception { int len = decoder . readSmallInt ( ) ; Object [ ] result = new Object [ len ] ; for ( int i = <int> ; i < result . length ; i + + ) { result [ i ] = elementSerializer . read ( decoder ) ; } return result ; } } 
