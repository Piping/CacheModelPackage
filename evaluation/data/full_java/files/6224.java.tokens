package org . elasticsearch . http . netty ; import org . elasticsearch . transport . TransportException ; import org . jboss . netty . buffer . ChannelBuffer ; import org . jboss . netty . handler . codec . embedder . DecoderEmbedder ; import org . jboss . netty . handler . codec . http . HttpContentDecompressor ; import org . jboss . netty . handler . codec . http . HttpHeaders ; public class ESHttpContentDecompressor extends HttpContentDecompressor { private final boolean compression ; public ESHttpContentDecompressor ( boolean compression ) { super ( ) ; this . compression = compression ; } @Override protected DecoderEmbedder < ChannelBuffer > newContentDecoder ( String contentEncoding ) throws Exception { if ( compression ) { return super . newContentDecoder ( contentEncoding ) ; } else { if ( HttpHeaders . Values . IDENTITY . equals ( contentEncoding ) ) { return null ; } else { throw new TransportException ( <str> ) ; } } } } 
