package org . elasticsearch . action . admin . cluster . snapshots . status ; import org . elasticsearch . common . xcontent . ToXContent ; import org . elasticsearch . common . xcontent . XContentBuilder ; import org . elasticsearch . common . xcontent . XContentBuilderString ; import java . io . IOException ; import java . util . Collection ; public class SnapshotShardsStats implements ToXContent { private int initializingShards ; private int startedShards ; private int finalizingShards ; private int doneShards ; private int failedShards ; private int totalShards ; SnapshotShardsStats ( Collection < SnapshotIndexShardStatus > shards ) { for ( SnapshotIndexShardStatus shard : shards ) { totalShards + + ; switch ( shard . getStage ( ) ) { case INIT : initializingShards + + ; break ; case STARTED : startedShards + + ; break ; case FINALIZE : finalizingShards + + ; break ; case DONE : doneShards + + ; break ; case FAILURE : failedShards + + ; break ; default : throw new IllegalArgumentException ( <str> + shard . getStage ( ) ) ; } } } public int getInitializingShards ( ) { return initializingShards ; } public int getStartedShards ( ) { return startedShards ; } public int getFinalizingShards ( ) { return finalizingShards ; } public int getDoneShards ( ) { return doneShards ; } public int getFailedShards ( ) { return failedShards ; } public int getTotalShards ( ) { return totalShards ; } static final class Fields { static final XContentBuilderString SHARDS_STATS = new XContentBuilderString ( <str> ) ; static final XContentBuilderString INITIALIZING = new XContentBuilderString ( <str> ) ; static final XContentBuilderString STARTED = new XContentBuilderString ( <str> ) ; static final XContentBuilderString FINALIZING = new XContentBuilderString ( <str> ) ; static final XContentBuilderString DONE = new XContentBuilderString ( <str> ) ; static final XContentBuilderString FAILED = new XContentBuilderString ( <str> ) ; static final XContentBuilderString TOTAL = new XContentBuilderString ( <str> ) ; } @Override public XContentBuilder toXContent ( XContentBuilder builder , ToXContent . Params params ) throws IOException { builder . startObject ( Fields . SHARDS_STATS ) ; builder . field ( Fields . INITIALIZING , getInitializingShards ( ) ) ; builder . field ( Fields . STARTED , getStartedShards ( ) ) ; builder . field ( Fields . FINALIZING , getFinalizingShards ( ) ) ; builder . field ( Fields . DONE , getDoneShards ( ) ) ; builder . field ( Fields . FAILED , getFailedShards ( ) ) ; builder . field ( Fields . TOTAL , getTotalShards ( ) ) ; builder . endObject ( ) ; return builder ; } } 
