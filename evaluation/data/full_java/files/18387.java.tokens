package com . badlogic . gdx . utils ; import java . text . MessageFormat ; import java . util . Locale ; class TextFormatter { private MessageFormat messageFormat ; private StringBuilder buffer ; public TextFormatter ( Locale locale , boolean useMessageFormat ) { buffer = new StringBuilder ( ) ; if ( useMessageFormat ) messageFormat = new MessageFormat ( <str> , locale ) ; } public String format ( String pattern , Object . . . args ) { if ( messageFormat ! = null ) { messageFormat . applyPattern ( replaceEscapeChars ( pattern ) ) ; return messageFormat . format ( args ) ; } return simpleFormat ( pattern , args ) ; } private String replaceEscapeChars ( String pattern ) { buffer . setLength ( <int> ) ; boolean changed = false ; int len = pattern . length ( ) ; for ( int i = <int> ; i < len ; i + + ) { char ch = pattern . charAt ( i ) ; if ( ch = = <str> ) { changed = true ; buffer . append ( <str> ) ; } else if ( ch = = <str> ) { int j = i + <int> ; while ( j < len & & pattern . charAt ( j ) = = <str> ) j + + ; int escaped = ( j - i ) / <int> ; if ( escaped > <int> ) { changed = true ; buffer . append ( <str> ) ; do { buffer . append ( <str> ) ; } while ( ( - - escaped ) > <int> ) ; buffer . append ( <str> ) ; } if ( ( j - i ) % <int> ! = <int> ) buffer . append ( <str> ) ; i = j - <int> ; } else { buffer . append ( ch ) ; } } return changed ? buffer . toString ( ) : pattern ; } private String simpleFormat ( String pattern , Object . . . args ) { buffer . setLength ( <int> ) ; boolean changed = false ; int placeholder = - <int> ; int patternLength = pattern . length ( ) ; for ( int i = <int> ; i < patternLength ; + + i ) { char ch = pattern . charAt ( i ) ; if ( placeholder < <int> ) { if ( ch = = <str> ) { changed = true ; if ( i + <int> < patternLength & & pattern . charAt ( i + <int> ) = = <str> ) { buffer . append ( ch ) ; + + i ; } else { placeholder = <int> ; } } else { buffer . append ( ch ) ; } } else { if ( ch = = <str> ) { if ( placeholder > = args . length ) throw new IllegalArgumentException ( <str> + placeholder ) ; if ( pattern . charAt ( i - <int> ) = = <str> ) throw new IllegalArgumentException ( <str> ) ; if ( args [ placeholder ] = = null ) buffer . append ( <str> ) ; else buffer . append ( args [ placeholder ] . toString ( ) ) ; placeholder = - <int> ; } else { if ( ch < <str> | | ch > <str> ) throw new IllegalArgumentException ( <str> + ch + <str> ) ; placeholder = placeholder * <int> + ( ch - <str> ) ; } } } if ( placeholder > = <int> ) throw new IllegalArgumentException ( <str> ) ; return changed ? buffer . toString ( ) : pattern ; } } 
