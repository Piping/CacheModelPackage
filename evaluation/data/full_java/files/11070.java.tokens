package org . gradle . integtests ; import org . codehaus . groovy . runtime . DefaultGroovyMethods ; import org . gradle . api . DefaultTask ; import org . gradle . api . tasks . InputDirectory ; import org . gradle . api . tasks . OutputDirectory ; import org . gradle . api . tasks . TaskAction ; import java . io . File ; import java . io . IOException ; public class DirTransformerTask extends DefaultTask { private File inputDir ; private File outputDir ; @InputDirectory public File getInputDir ( ) { return inputDir ; } public void setInputDir ( File inputDir ) { this . inputDir = inputDir ; } @OutputDirectory public File getOutputDir ( ) { return outputDir ; } public void setOutputDir ( File outputDir ) { this . outputDir = outputDir ; } @TaskAction public void transform ( ) throws IOException { for ( File inputFile : inputDir . listFiles ( ) ) { File outputFile = new File ( outputDir , inputFile . getName ( ) ) ; String text = DefaultGroovyMethods . getText ( inputFile ) ; DefaultGroovyMethods . setText ( outputFile , String . format ( <str> , text ) ) ; } } } 
