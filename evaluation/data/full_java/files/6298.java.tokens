package org . elasticsearch . index . analysis ; import org . apache . lucene . analysis . charfilter . HTMLStripCharFilter ; import org . elasticsearch . common . inject . Inject ; import org . elasticsearch . env . Environment ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . env . Environment ; import org . elasticsearch . index . IndexSettings ; import java . io . Reader ; import java . util . Set ; import static java . util . Collections . unmodifiableSet ; import static org . elasticsearch . common . util . set . Sets . newHashSet ; public class HtmlStripCharFilterFactory extends AbstractCharFilterFactory { private final Set < String > escapedTags ; public HtmlStripCharFilterFactory ( IndexSettings indexSettings , Environment env , String name , Settings settings ) { super ( indexSettings , name ) ; String [ ] escapedTags = settings . getAsArray ( <str> ) ; if ( escapedTags . length > <int> ) { this . escapedTags = unmodifiableSet ( newHashSet ( escapedTags ) ) ; } else { this . escapedTags = null ; } } public Set < String > escapedTags ( ) { return escapedTags ; } @Override public Reader create ( Reader tokenStream ) { return new HTMLStripCharFilter ( tokenStream , escapedTags ) ; } } 
