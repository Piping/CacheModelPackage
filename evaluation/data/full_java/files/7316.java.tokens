package org . elasticsearch . search . aggregations . metrics . percentiles ; import org . elasticsearch . common . xcontent . XContentBuilder ; import org . elasticsearch . search . aggregations . metrics . ValuesSourceMetricsAggregationBuilder ; import java . io . IOException ; abstract class AbstractPercentilesBuilder < PB extends AbstractPercentilesBuilder < PB > > extends ValuesSourceMetricsAggregationBuilder < PB > { private Double compression ; private PercentilesMethod method ; private Integer numberOfSignificantValueDigits ; public AbstractPercentilesBuilder ( String name , String type ) { super ( name , type ) ; } public PB method ( PercentilesMethod method ) { this . method = method ; return ( PB ) this ; } public PB compression ( double compression ) { this . compression = compression ; return ( PB ) this ; } public PB numberOfSignificantValueDigits ( int numberOfSignificantValueDigits ) { this . numberOfSignificantValueDigits = numberOfSignificantValueDigits ; return ( PB ) this ; } @Override protected void internalXContent ( XContentBuilder builder , Params params ) throws IOException { super . internalXContent ( builder , params ) ; doInternalXContent ( builder , params ) ; if ( method ! = null ) { builder . startObject ( method . getName ( ) ) ; if ( compression ! = null ) { builder . field ( AbstractPercentilesParser . COMPRESSION_FIELD . getPreferredName ( ) , compression ) ; } if ( numberOfSignificantValueDigits ! = null ) { builder . field ( AbstractPercentilesParser . NUMBER_SIGNIFICANT_DIGITS_FIELD . getPreferredName ( ) , numberOfSignificantValueDigits ) ; } builder . endObject ( ) ; } } protected abstract void doInternalXContent ( XContentBuilder builder , Params params ) throws IOException ; } 
