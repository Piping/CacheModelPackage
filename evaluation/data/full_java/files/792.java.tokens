package org . apache . cassandra . metrics ; import java . util . concurrent . Callable ; import com . codahale . metrics . Gauge ; import static org . apache . cassandra . metrics . CassandraMetricsRegistry . Metrics ; public class ClientMetrics { private static final MetricNameFactory factory = new DefaultNameFactory ( <str> ) ; public static final ClientMetrics instance = new ClientMetrics ( ) ; private ClientMetrics ( ) { } public void addCounter ( String name , final Callable < Integer > provider ) { Metrics . register ( factory . createMetricName ( name ) , new Gauge < Integer > ( ) { public Integer getValue ( ) { try { return provider . call ( ) ; } catch ( Exception e ) { throw new RuntimeException ( e ) ; } } } ) ; } } 
