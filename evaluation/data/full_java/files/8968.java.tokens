package org . elasticsearch . test ; import org . elasticsearch . Version ; import org . elasticsearch . cluster . metadata . IndexMetaData ; import org . elasticsearch . common . inject . AbstractModule ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . index . Index ; import org . elasticsearch . index . IndexSettings ; import java . util . Collections ; public class IndexSettingsModule extends AbstractModule { private final Index index ; private final Settings settings ; public IndexSettingsModule ( Index index , Settings settings ) { this . settings = settings ; this . index = index ; } @Override protected void configure ( ) { bind ( IndexSettings . class ) . toInstance ( newIndexSettings ( index , settings ) ) ; } public static IndexSettings newIndexSettings ( String index , Settings settings ) { return newIndexSettings ( new Index ( index ) , settings ) ; } public static IndexSettings newIndexSettings ( Index index , Settings settings ) { Settings build = Settings . settingsBuilder ( ) . put ( IndexMetaData . SETTING_VERSION_CREATED , Version . CURRENT ) . put ( IndexMetaData . SETTING_NUMBER_OF_REPLICAS , <int> ) . put ( IndexMetaData . SETTING_NUMBER_OF_SHARDS , <int> ) . put ( settings ) . build ( ) ; IndexMetaData metaData = IndexMetaData . builder ( index . getName ( ) ) . settings ( build ) . build ( ) ; return new IndexSettings ( metaData , Settings . EMPTY , Collections . emptyList ( ) ) ; } } 
