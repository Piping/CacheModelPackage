package org . elasticsearch . index . fielddata . plain ; import org . apache . lucene . index . Terms ; import org . apache . lucene . index . TermsEnum ; import org . apache . lucene . util . BytesRef ; import org . elasticsearch . common . Nullable ; import org . elasticsearch . common . breaker . CircuitBreaker ; import java . io . IOException ; public class NonEstimatingEstimator implements AbstractIndexFieldData . PerValueEstimator { private final CircuitBreaker breaker ; NonEstimatingEstimator ( CircuitBreaker breaker ) { this . breaker = breaker ; } @Override public long bytesPerValue ( BytesRef term ) { return <int> ; } @Override public TermsEnum beforeLoad ( Terms terms ) throws IOException { return null ; } @Override public void afterLoad ( @Nullable TermsEnum termsEnum , long actualUsed ) { breaker . addWithoutBreaking ( actualUsed ) ; } } 
