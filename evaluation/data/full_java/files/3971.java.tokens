package org . eclipse . debug . internal . ui ; import org . eclipse . debug . ui . DebugUITools ; import org . eclipse . debug . ui . IDebugUIConstants ; import org . eclipse . jface . resource . CompositeImageDescriptor ; import org . eclipse . swt . graphics . Image ; import org . eclipse . swt . graphics . ImageData ; import org . eclipse . swt . graphics . Point ; public class CompositeDebugImageDescriptor extends CompositeImageDescriptor { public final static int SKIP_BREAKPOINT = <hex> ; private Image fBaseImage ; private int fFlags ; private Point fSize ; public CompositeDebugImageDescriptor ( Image baseImage , int flags ) { setBaseImage ( baseImage ) ; setFlags ( flags ) ; } @Override protected Point getSize ( ) { if ( fSize = = null ) { ImageData data = getBaseImage ( ) . getImageData ( ) ; setSize ( new Point ( data . width , data . height ) ) ; } return fSize ; } @Override public boolean equals ( Object object ) { if ( ! ( object instanceof CompositeDebugImageDescriptor ) ) { return false ; } CompositeDebugImageDescriptor other = ( CompositeDebugImageDescriptor ) object ; return ( getBaseImage ( ) . equals ( other . getBaseImage ( ) ) & & getFlags ( ) = = other . getFlags ( ) ) ; } @Override public int hashCode ( ) { return getBaseImage ( ) . hashCode ( ) | getFlags ( ) ; } @Override protected void drawCompositeImage ( int width , int height ) { ImageData bg = getBaseImage ( ) . getImageData ( ) ; if ( bg = = null ) { bg = DEFAULT_IMAGE_DATA ; } drawImage ( bg , <int> , <int> ) ; drawOverlays ( ) ; } protected void drawOverlays ( ) { int flags = getFlags ( ) ; int x = <int> ; int y = <int> ; ImageData data = null ; if ( ( flags & SKIP_BREAKPOINT ) ! = <int> ) { x = <int> ; y = <int> ; data = DebugUITools . getImage ( IDebugUIConstants . IMG_OVR_SKIP_BREAKPOINT ) . getImageData ( ) ; drawImage ( data , x , y ) ; } } protected Image getBaseImage ( ) { return fBaseImage ; } protected void setBaseImage ( Image image ) { fBaseImage = image ; } protected int getFlags ( ) { return fFlags ; } protected void setFlags ( int flags ) { fFlags = flags ; } protected void setSize ( Point size ) { fSize = size ; } } 
