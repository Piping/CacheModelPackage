package org . elasticsearch . common . xcontent . yaml ; import com . fasterxml . jackson . core . JsonEncoding ; import com . fasterxml . jackson . dataformat . yaml . YAMLFactory ; import org . elasticsearch . ElasticsearchParseException ; import org . elasticsearch . common . bytes . BytesReference ; import org . elasticsearch . common . io . FastStringReader ; import org . elasticsearch . common . xcontent . * ; import java . io . * ; public class YamlXContent implements XContent { public static XContentBuilder contentBuilder ( ) throws IOException { return XContentBuilder . builder ( yamlXContent ) ; } final static YAMLFactory yamlFactory ; public final static YamlXContent yamlXContent ; static { yamlFactory = new YAMLFactory ( ) ; yamlXContent = new YamlXContent ( ) ; } private YamlXContent ( ) { } @Override public XContentType type ( ) { return XContentType . YAML ; } @Override public byte streamSeparator ( ) { throw new ElasticsearchParseException ( <str> ) ; } @Override public XContentGenerator createGenerator ( OutputStream os ) throws IOException { return new YamlXContentGenerator ( yamlFactory . createGenerator ( os , JsonEncoding . UTF8 ) , os ) ; } @Override public XContentGenerator createGenerator ( OutputStream os , String [ ] filters ) throws IOException { return new YamlXContentGenerator ( yamlFactory . createGenerator ( os , JsonEncoding . UTF8 ) , os , filters ) ; } @Override public XContentParser createParser ( String content ) throws IOException { return new YamlXContentParser ( yamlFactory . createParser ( new FastStringReader ( content ) ) ) ; } @Override public XContentParser createParser ( InputStream is ) throws IOException { return new YamlXContentParser ( yamlFactory . createParser ( is ) ) ; } @Override public XContentParser createParser ( byte [ ] data ) throws IOException { return new YamlXContentParser ( yamlFactory . createParser ( data ) ) ; } @Override public XContentParser createParser ( byte [ ] data , int offset , int length ) throws IOException { return new YamlXContentParser ( yamlFactory . createParser ( data , offset , length ) ) ; } @Override public XContentParser createParser ( BytesReference bytes ) throws IOException { if ( bytes . hasArray ( ) ) { return createParser ( bytes . array ( ) , bytes . arrayOffset ( ) , bytes . length ( ) ) ; } return createParser ( bytes . streamInput ( ) ) ; } @Override public XContentParser createParser ( Reader reader ) throws IOException { return new YamlXContentParser ( yamlFactory . createParser ( reader ) ) ; } } 
