package org . gradle . launcher . daemon . server . exec ; import org . gradle . api . logging . Logger ; import org . gradle . api . logging . Logging ; import org . gradle . launcher . daemon . server . api . DaemonCommandAction ; import org . gradle . launcher . daemon . server . api . DaemonCommandExecution ; public class WatchForDisconnection implements DaemonCommandAction { private static final Logger LOGGER = Logging . getLogger ( WatchForDisconnection . class ) ; public void execute ( final DaemonCommandExecution execution ) { execution . getConnection ( ) . onDisconnect ( new Runnable ( ) { public void run ( ) { LOGGER . warn ( <str> ) ; execution . getDaemonStateControl ( ) . requestForcefulStop ( ) ; } } ) ; try { execution . proceed ( ) ; } finally { execution . getConnection ( ) . onDisconnect ( null ) ; } } } 
