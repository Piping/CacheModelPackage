package org . eclipse . debug . internal . ui . views . variables . details ; import java . util . ArrayList ; import java . util . HashMap ; import java . util . List ; import java . util . Map ; import org . eclipse . debug . ui . IDetailPane ; import org . eclipse . jface . action . IAction ; import org . eclipse . ui . IViewSite ; import org . eclipse . ui . IWorkbenchPartSite ; import org . eclipse . ui . texteditor . IUpdate ; public abstract class AbstractDetailPane implements IDetailPane { private IWorkbenchPartSite fWorkbenchPartSite ; private Map < String , IAction > fActionMap = new HashMap < String , IAction > ( ) ; private List < String > fSelectionActions = new ArrayList < String > ( ) ; @Override public void init ( IWorkbenchPartSite workbench ) { fWorkbenchPartSite = workbench ; } @Override public void dispose ( ) { fActionMap . clear ( ) ; fSelectionActions . clear ( ) ; } protected void setAction ( String actionID , IAction action ) { if ( action = = null ) { fActionMap . remove ( actionID ) ; } else { fActionMap . put ( actionID , action ) ; } } protected void setGlobalAction ( String actionID , IAction action ) { getViewSite ( ) . getActionBars ( ) . setGlobalActionHandler ( actionID , action ) ; } protected void setSelectionDependantAction ( String actionID ) { if ( actionID ! = null ) { fSelectionActions . add ( actionID ) ; } } protected IAction getAction ( String actionID ) { return fActionMap . get ( actionID ) ; } protected void updateAction ( String actionId ) { IAction action = getAction ( actionId ) ; if ( action instanceof IUpdate ) { ( ( IUpdate ) action ) . update ( ) ; } } protected void updateSelectionDependentActions ( ) { for ( String string : fSelectionActions ) { updateAction ( string ) ; } } protected IViewSite getViewSite ( ) { if ( fWorkbenchPartSite = = null ) { return null ; } else { return ( IViewSite ) fWorkbenchPartSite . getPart ( ) . getSite ( ) ; } } protected IWorkbenchPartSite getWorkbenchPartSite ( ) { return fWorkbenchPartSite ; } protected boolean isInView ( ) { return fWorkbenchPartSite ! = null ; } } 
