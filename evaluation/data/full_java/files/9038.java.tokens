package org . elasticsearch . test . rest . parser ; import org . elasticsearch . common . xcontent . XContentParser ; import org . elasticsearch . test . rest . section . SetSection ; import java . io . IOException ; public class SetSectionParser implements RestTestFragmentParser < SetSection > { @Override public SetSection parse ( RestTestSuiteParseContext parseContext ) throws IOException , RestTestParseException { XContentParser parser = parseContext . parser ( ) ; String currentFieldName = null ; XContentParser . Token token ; SetSection setSection = new SetSection ( ) ; while ( ( token = parser . nextToken ( ) ) ! = XContentParser . Token . END_OBJECT ) { if ( token = = XContentParser . Token . FIELD_NAME ) { currentFieldName = parser . currentName ( ) ; } else if ( token . isValue ( ) ) { setSection . addSet ( currentFieldName , parser . text ( ) ) ; } } parser . nextToken ( ) ; if ( setSection . getStash ( ) . isEmpty ( ) ) { throw new RestTestParseException ( <str> ) ; } return setSection ; } } 
