package org . eclipse . debug . internal . ui . sourcelookup ; import org . eclipse . core . resources . IResource ; import org . eclipse . core . runtime . IAdaptable ; import org . eclipse . jface . viewers . ILabelProvider ; import org . eclipse . jface . viewers . LabelProvider ; import org . eclipse . swt . graphics . Image ; import org . eclipse . ui . model . WorkbenchLabelProvider ; public class SourceElementLabelProvider extends LabelProvider { private ILabelProvider fLabelProvider = null ; private ILabelProvider getWorkbenchLabelProvider ( ) { if ( fLabelProvider = = null ) { fLabelProvider = new WorkbenchLabelProvider ( ) ; } return fLabelProvider ; } private ILabelProvider getLabelProvider ( Object element ) { if ( element instanceof IAdaptable ) { SourceElementLabelProvider lp = ( ( IAdaptable ) element ) . getAdapter ( SourceElementLabelProvider . class ) ; if ( lp ! = null ) { return lp ; } } return getWorkbenchLabelProvider ( ) ; } @Override public void dispose ( ) { super . dispose ( ) ; if ( fLabelProvider ! = null ) { fLabelProvider . dispose ( ) ; } } @Override public Image getImage ( Object element ) { return getLabelProvider ( element ) . getImage ( element ) ; } @Override public String getText ( Object element ) { if ( element instanceof IResource ) { return SourceElementWorkbenchAdapter . getQualifiedName ( ( ( IResource ) element ) . getFullPath ( ) ) ; } return getLabelProvider ( element ) . getText ( element ) ; } } 
