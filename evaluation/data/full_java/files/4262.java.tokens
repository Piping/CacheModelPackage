package org . eclipse . debug . internal . ui . model . elements ; import org . eclipse . core . runtime . CoreException ; import org . eclipse . debug . core . DebugPlugin ; import org . eclipse . debug . core . model . IDebugTarget ; import org . eclipse . debug . core . model . IMemoryBlockRetrieval ; import org . eclipse . debug . internal . ui . viewers . model . provisional . IPresentationContext ; import org . eclipse . debug . internal . ui . viewers . model . provisional . IViewerUpdate ; import org . eclipse . debug . ui . IDebugUIConstants ; public class DebugTargetContentProvider extends ElementContentProvider { @Override protected int getChildCount ( Object element , IPresentationContext context , IViewerUpdate monitor ) throws CoreException { String id = context . getId ( ) ; if ( id . equals ( IDebugUIConstants . ID_DEBUG_VIEW ) ) { return ( ( IDebugTarget ) element ) . getThreads ( ) . length ; } else if ( id . equals ( IDebugUIConstants . ID_MEMORY_VIEW ) ) { return getAllChildren ( element , context , monitor ) . length ; } return <int> ; } @Override protected boolean supportsContextId ( String id ) { return IDebugUIConstants . ID_DEBUG_VIEW . equals ( id ) | | IDebugUIConstants . ID_MEMORY_VIEW . equals ( id ) ; } @Override protected Object [ ] getChildren ( Object parent , int index , int length , IPresentationContext context , IViewerUpdate monitor ) throws CoreException { return getElements ( getAllChildren ( parent , context , monitor ) , index , length ) ; } @Override protected boolean hasChildren ( Object element , IPresentationContext context , IViewerUpdate monitor ) throws CoreException { String id = context . getId ( ) ; if ( id . equals ( IDebugUIConstants . ID_DEBUG_VIEW ) ) { return ( ( IDebugTarget ) element ) . hasThreads ( ) ; } else if ( id . equals ( IDebugUIConstants . ID_MEMORY_VIEW ) ) { return getAllChildren ( element , context , monitor ) . length > <int> ; } return false ; } protected Object [ ] getAllChildren ( Object parent , IPresentationContext context , IViewerUpdate monitor ) throws CoreException { String id = context . getId ( ) ; if ( id . equals ( IDebugUIConstants . ID_DEBUG_VIEW ) ) { return ( ( IDebugTarget ) parent ) . getThreads ( ) ; } else if ( id . equals ( IDebugUIConstants . ID_MEMORY_VIEW ) ) { if ( parent instanceof IMemoryBlockRetrieval ) { if ( ( ( IMemoryBlockRetrieval ) parent ) . supportsStorageRetrieval ( ) ) return DebugPlugin . getDefault ( ) . getMemoryBlockManager ( ) . getMemoryBlocks ( ( IMemoryBlockRetrieval ) parent ) ; } } return EMPTY ; } } 
