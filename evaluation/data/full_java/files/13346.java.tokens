package org . gradle . api . publish . ivy . internal . publisher ; import org . apache . ivy . Ivy ; import org . gradle . api . Action ; import org . gradle . api . internal . artifacts . ivyservice . IvyContextManager ; import org . gradle . api . internal . artifacts . repositories . PublicationAwareRepository ; public class ContextualizingIvyPublisher implements IvyPublisher { private final IvyPublisher ivyPublisher ; private final IvyContextManager ivyContextManager ; public ContextualizingIvyPublisher ( IvyPublisher ivyPublisher , IvyContextManager ivyContextManager ) { this . ivyPublisher = ivyPublisher ; this . ivyContextManager = ivyContextManager ; } public void publish ( final IvyNormalizedPublication publication , final PublicationAwareRepository repository ) { ivyContextManager . withIvy ( new Action < Ivy > ( ) { public void execute ( Ivy ivy ) { ivyPublisher . publish ( publication , repository ) ; } } ) ; } } 
