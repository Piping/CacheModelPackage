package io . netty . example . factorial ; import io . netty . channel . ChannelHandlerContext ; import io . netty . channel . SimpleChannelInboundHandler ; import java . math . BigInteger ; public class FactorialServerHandler extends SimpleChannelInboundHandler < BigInteger > { private BigInteger lastMultiplier = new BigInteger ( <str> ) ; private BigInteger factorial = new BigInteger ( <str> ) ; @Override public void channelRead0 ( ChannelHandlerContext ctx , BigInteger msg ) throws Exception { lastMultiplier = msg ; factorial = factorial . multiply ( msg ) ; ctx . writeAndFlush ( factorial ) ; } @Override public void channelInactive ( ChannelHandlerContext ctx ) throws Exception { System . err . printf ( <str> , lastMultiplier , factorial ) ; } @Override public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) throws Exception { cause . printStackTrace ( ) ; ctx . close ( ) ; } } 
