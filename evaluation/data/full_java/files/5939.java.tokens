package org . elasticsearch . common . io . stream ; import java . io . IOException ; public class NamedWriteableAwareStreamInput extends FilterStreamInput { private final NamedWriteableRegistry namedWriteableRegistry ; public NamedWriteableAwareStreamInput ( StreamInput delegate , NamedWriteableRegistry namedWriteableRegistry ) { super ( delegate ) ; this . namedWriteableRegistry = namedWriteableRegistry ; } @Override < C > C readNamedWriteable ( Class < C > categoryClass ) throws IOException { String name = readString ( ) ; NamedWriteable < ? extends C > namedWriteable = namedWriteableRegistry . getPrototype ( categoryClass , name ) ; return namedWriteable . readFrom ( this ) ; } } 
