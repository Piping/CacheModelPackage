package org . eclipse . debug . internal . ui . views . variables ; import org . eclipse . debug . core . DebugPlugin ; import org . eclipse . debug . core . ILogicalStructureType ; import org . eclipse . debug . core . model . IValue ; import org . eclipse . jface . action . Action ; import org . eclipse . jface . action . IAction ; import org . eclipse . swt . custom . BusyIndicator ; public class SelectLogicalStructureAction extends Action { private VariablesView fView ; private ILogicalStructureType fType ; private ILogicalStructureType [ ] fAvailableTypes ; public SelectLogicalStructureAction ( VariablesView view , ILogicalStructureType type , IValue value , ILogicalStructureType [ ] availableTypes ) { super ( type . getDescription ( value ) , IAction . AS_CHECK_BOX ) ; setView ( view ) ; fAvailableTypes = availableTypes ; fType = type ; } @Override public void run ( ) { valueChanged ( ) ; } private void valueChanged ( ) { if ( ! getView ( ) . isAvailable ( ) ) { return ; } BusyIndicator . showWhile ( getView ( ) . getViewer ( ) . getControl ( ) . getDisplay ( ) , new Runnable ( ) { @Override public void run ( ) { ILogicalStructureType type = null ; if ( isChecked ( ) ) { type = fType ; } DebugPlugin . setDefaultStructureType ( fAvailableTypes , type ) ; getView ( ) . getViewer ( ) . refresh ( ) ; } } ) ; } protected VariablesView getView ( ) { return fView ; } protected void setView ( VariablesView view ) { fView = view ; } } 
