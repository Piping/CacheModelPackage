package org . elasticsearch . options . detailederrors ; import org . apache . http . impl . client . HttpClients ; import org . elasticsearch . common . settings . Settings ; import org . elasticsearch . http . HttpServerTransport ; import org . elasticsearch . http . netty . NettyHttpServerTransport ; import org . elasticsearch . node . Node ; import org . elasticsearch . test . ESIntegTestCase ; import org . elasticsearch . test . ESIntegTestCase . ClusterScope ; import org . elasticsearch . test . ESIntegTestCase . Scope ; import org . elasticsearch . test . rest . client . http . HttpDeleteWithEntity ; import org . elasticsearch . test . rest . client . http . HttpRequestBuilder ; import org . elasticsearch . test . rest . client . http . HttpResponse ; import static org . hamcrest . Matchers . is ; @ClusterScope ( scope = Scope . TEST , numDataNodes = <int> ) public class DetailedErrorsDisabledIT extends ESIntegTestCase { @Override protected Settings nodeSettings ( int nodeOrdinal ) { return Settings . settingsBuilder ( ) . put ( super . nodeSettings ( nodeOrdinal ) ) . put ( Node . HTTP_ENABLED , true ) . put ( NettyHttpServerTransport . SETTING_HTTP_DETAILED_ERRORS_ENABLED , false ) . build ( ) ; } public void testThatErrorTraceParamReturns400 ( ) throws Exception { HttpResponse response = new HttpRequestBuilder ( HttpClients . createDefault ( ) ) . httpTransport ( internalCluster ( ) . getDataNodeInstance ( HttpServerTransport . class ) ) . addParam ( <str> , <str> ) . method ( HttpDeleteWithEntity . METHOD_NAME ) . execute ( ) ; assertThat ( response . getHeaders ( ) . get ( <str> ) , is ( <str> ) ) ; assertThat ( response . getBody ( ) , is ( <str> ) ) ; assertThat ( response . getStatusCode ( ) , is ( <int> ) ) ; } } 
