package org . elasticsearch . index . search . stats ; import org . elasticsearch . common . xcontent . XContentParser ; import org . elasticsearch . search . SearchParseElement ; import org . elasticsearch . search . internal . SearchContext ; import java . util . ArrayList ; import java . util . Collections ; import java . util . List ; public class StatsGroupsParseElement implements SearchParseElement { @Override public void parse ( XContentParser parser , SearchContext context ) throws Exception { XContentParser . Token token = parser . currentToken ( ) ; if ( token . isValue ( ) ) { context . groupStats ( Collections . singletonList ( parser . text ( ) ) ) ; } else if ( token = = XContentParser . Token . START_ARRAY ) { List < String > groupStats = new ArrayList < > ( <int> ) ; while ( ( token = parser . nextToken ( ) ) ! = XContentParser . Token . END_ARRAY ) { groupStats . add ( parser . text ( ) ) ; } context . groupStats ( groupStats ) ; } } } 
