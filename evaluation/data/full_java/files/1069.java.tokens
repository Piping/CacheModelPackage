package org . apache . cassandra . tools . nodetool ; import static com . google . common . collect . Iterables . toArray ; import io . airlift . command . Command ; import java . util . List ; import java . util . Set ; import javax . management . openmbean . TabularData ; import org . apache . cassandra . tools . NodeProbe ; import org . apache . cassandra . tools . NodeTool . NodeToolCmd ; @Command ( name = <str> , description = <str> ) public class CompactionHistory extends NodeToolCmd { @Override public void execute ( NodeProbe probe ) { System . out . println ( <str> ) ; TabularData tabularData = probe . getCompactionHistory ( ) ; if ( tabularData . isEmpty ( ) ) { System . out . printf ( <str> ) ; return ; } String format = <str> ; List < String > indexNames = tabularData . getTabularType ( ) . getIndexNames ( ) ; System . out . printf ( format , toArray ( indexNames , Object . class ) ) ; Set < ? > values = tabularData . keySet ( ) ; for ( Object eachValue : values ) { List < ? > value = ( List < ? > ) eachValue ; System . out . printf ( format , toArray ( value , Object . class ) ) ; } } } 
