class Gnutls < Formula desc <str> homepage <str> url <str> mirror <str> mirror <str> sha256 <str> bottle do cellar <str> sha256 <str> = > <str> sha256 <str> = > <str> sha256 <str> = > <str> end depends_on <str> = > <str> depends_on <str> depends_on <str> depends_on <str> depends_on <str> = > <str> depends_on <str> = > <str> fails_with <str> do build <int> cause <str> end def install args = <str> prefix <str> etc <str> etc <str> if build . with? <str> args << <str> args << <str> end system <str> , * args system <str> , <str> mv bin / <str> , bin / <str> mv man1 / <str> , man1 / <str> end def post_install keychains = <str> certs_list = <str> keychains . join ( <str> ) <str> certs = certs_list . scan ( <str> ) valid_certs = certs . select do | cert | IO . popen ( <str> , <str> ) do | openssl_io | openssl_io . write ( cert ) openssl_io . close_write end $? . success? end openssldir = etc / <str> openssldir . mkpath ( openssldir / <str> ) . atomic_write ( valid_certs . join ( <str> ) ) end test do system bin / <str> , <str> end end 
