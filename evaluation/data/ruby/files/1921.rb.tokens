class ShadowsocksLibev < Formula desc <str> homepage <str> url <str> sha256 <str> head <str> bottle do cellar <str> sha256 <str> = > <str> sha256 <str> = > <str> sha256 <str> = > <str> end depends_on <str> def install args = [ <str> prefix <str> ] system <str> , * args system <str> bin . install <str> , <str> , <str> , <str> ( buildpath / <str> ) . write <<- <str> EOS <str> . undent <str> EOS etc . install <str> rm <str> inreplace Dir [ <str> ] , <str> , <str> etc <str> man8 . install Dir [ <str> ] man1 . install Dir [ <str> ] end test do ( testpath / <str> ) . write <<- <str> EOS <str> . undent <str> EOS server = fork { exec bin / <str> , <str> , testpath / <str> } client = fork { exec bin / <str> , <str> , testpath / <str> } sleep <int> begin system <str> , <str> , <str> , <str> ensure Process . kill <int> , server Process . wait server Process . kill <int> , client Process . wait client end end plist_options <str> = > <str> HOMEBREW_PREFIX <str> HOMEBREW_PREFIX <str> def plist ; <<- <str> EOS <str> . undent <str> EOS end end 
