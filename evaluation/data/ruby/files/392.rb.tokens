module Diaspora module Likeable def self . included ( model ) model . instance_eval do has_many <str> , - > { where ( <str> : true ) } , <str> : <str> , <str> : <str> has_many <str> , - > { where ( <str> : false ) } , <str> : <str> , <str> : <str> , <str> : <str> end end def update_likes_counter self . class . where ( id : self . id ) . update_all ( <str> : self . likes . count ) end end end 
