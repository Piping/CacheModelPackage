class Spinach :: Features :: Invites < Spinach :: FeatureSteps include SharedAuthentication include SharedUser include SharedGroup step <str> do user = User . find_by ( name : <str> ) group = Group . find_by ( name : <str> ) group . add_developer ( <str> , user ) end step <str> do group = Group . find_by ( name : <str> ) invite = group . group_members . invite . last invite . generate_invite_token! @raw_invite_token = invite . raw_invite_token visit invite_path ( @raw_invite_token ) end step <str> do expect ( current_path ) . to eq ( new_user_session_path ) end step <str> do expect ( page ) . to have_content <str> end step <str> do expect ( current_path ) . to eq ( invite_path ( @raw_invite_token ) ) end step <str> do expect ( page ) . to have_content ( <str> ) end step <str> do expect ( page ) . to have_content ( <str> ) end step <str> do expect ( page ) . to have_link ( <str> ) end step <str> do expect ( page ) . to have_link ( <str> ) end step <str> do page . click_link <str> end step <str> do group = Group . find_by ( name : <str> ) expect ( current_path ) . to eq ( group_path ( group ) ) end step <str> do expect ( page ) . to have_content ( <str> ) end step <str> do page . click_link <str> end step <str> do expect ( current_path ) . to eq ( dashboard_projects_path ) end step <str> do expect ( page ) . to have_content ( <str> ) end step <str> do group = Group . find_by ( name : <str> ) invite = group . group_members . invite . last invite . generate_invite_token! @raw_invite_token = invite . raw_invite_token visit decline_invite_path ( @raw_invite_token ) end end 
