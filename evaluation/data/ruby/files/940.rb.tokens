require <str> describe Bosh :: Registry :: InstanceManager do let ( <str> ) do Bosh :: Registry :: InstanceManager . new ( ) end def create_instance ( params ) Bosh :: Registry :: Models :: RegistryInstance . create ( params ) end describe <str> do it <str> do create_instance ( <str> = > <str> , <str> = > <str> ) expect ( manager . read_settings ( <str> ) ) . to eq ( <str> ) end it <str> do expect { manager . read_settings ( <str> ) } . to raise_error ( Bosh :: Registry :: InstanceNotFound , <str> ) end end describe <str> do it <str> do manager . update_settings ( <str> , <str> ) expect ( manager . read_settings ( <str> ) ) . to eq ( <str> ) end it <str> do create_instance ( <str> = > <str> , <str> = > <str> ) expect ( manager . read_settings ( <str> ) ) . to eq ( <str> ) manager . update_settings ( <str> , <str> ) expect ( manager . read_settings ( <str> ) ) . to eq ( <str> ) end end describe <str> do it <str> do manager . update_settings ( <str> , <str> ) manager . delete_settings ( <str> ) expect { manager . read_settings ( <str> ) } . to raise_error ( Bosh :: Registry :: InstanceNotFound , <str> ) end it <str> do expect { manager . delete_settings ( <str> ) } . to raise_error ( Bosh :: Registry :: InstanceNotFound , <str> ) end end end 
