require <str> describe Projects :: MilestonesController do let ( <str> ) { create ( <str> ) } let ( <str> ) { create ( <str> ) } let ( <str> ) { create ( <str> , <str> : project ) } let ( <str> ) { create ( <str> , <str> : project , <str> : milestone ) } let! ( <str> ) { create ( <str> , <str> : project , <str> : project , <str> : milestone ) } before do sign_in ( user ) project . team << [ user , <str> ] controller . instance_variable_set ( <str> , project ) end describe <str> do it <str> do expect ( issue . milestone_id ) . to eq ( milestone . id ) delete <str> , <str> : project . namespace . id , <str> : project . id , id : milestone . iid , format : <str> expect ( response ) . to be_success expect ( Event . first . action ) . to eq ( Event :: DESTROYED ) expect { Milestone . find ( milestone . id ) } . to raise_exception ( ActiveRecord :: RecordNotFound ) issue . reload expect ( issue . milestone_id ) . to eq ( nil ) merge_request . reload expect ( merge_request . milestone_id ) . to eq ( nil ) last_note = project . issues . find ( issue . id ) . notes [ - <int> ] . note expect ( last_note ) . to eq ( <str> ) end end end 
