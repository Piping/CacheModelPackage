class Zookeeper < Formula desc <str> homepage <str> stable do url <str> sha256 <str> end bottle do cellar <str> sha256 <str> = > <str> sha256 <str> = > <str> sha256 <str> = > <str> end head do url <str> depends_on <str> = > <str> depends_on <str> = > <str> depends_on <str> = > <str> depends_on <str> = > <str> depends_on <str> = > <str> end option <str> , <str> deprecated_option <str> = > <str> depends_on <str> = > <str> def shim_script ( target ) <<- <str> EOS <str> . undent <str> EOS end def default_zk_env <<- <str> EOS <str> . undent <str> EOS end def default_log4j_properties <<- <str> EOS <str> . undent <str> EOS end def install if Hardware . is_32_bit? ENV [ <str> ] = <str> Hardware :: CPU . arch_32_bit <str> else ENV [ <str> ] = Hardware :: CPU . universal_archs . as_arch_flags end if build . head? system <str> , <str> system <str> , <str> , <str> end cd <str> do system <str> , <str> , <str> prefix <str> , <str> system <str> , <str> end if build . with? <str> cd <str> do system <str> , <str> , <str> system <str> , <str> , <str> , <str> prefix <str> end end if build . with? <str> cd <str> do system <str> , <str> , <str> prefix <str> , <str> include <str> , <str> lib <str> system <str> , <str> end end rm_f Dir [ <str> ] if build . head? system <str> libexec . install Dir [ <str> , <str> , <str> , <str> ] else libexec . install Dir [ <str> , <str> , <str> , <str> ] end bin . mkpath ( etc / <str> ) . mkpath ( var / <str> ) . mkpath ( var / <str> ) . mkpath Pathname . glob ( <str> libexec <str> ) do | path | next if path == libexec + <str> script_name = path . basename bin_name = path . basename <str> ( bin + bin_name ) . write shim_script ( script_name ) end defaults = etc / <str> defaults . write ( default_zk_env ) unless defaults . exist? log4j_properties = etc / <str> log4j_properties . write ( default_log4j_properties ) unless log4j_properties . exist? inreplace <str> , <str> , <str> var <str> cp <str> , <str> ( etc / <str> ) . install [ <str> , <str> ] end plist_options <str> = > <str> def plist ; <<- <str> EOS <str> . undent <str> EOS end end 
