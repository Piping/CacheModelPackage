require File . expand_path ( <str> , __FILE__ ) with_feature <str> do describe <str> do it <str> do step = <int> fiber = Fiber . new { step = <int> ; Fiber . yield ; step = <int> ; Fiber . yield ; step = <int> } fiber . resume step . should == <int> fiber . resume step . should == <int> end it <str> do fiber = Fiber . new { true ; Fiber . yield <str> ; true } fiber . resume . should == <str> end it <str> do fiber = Fiber . new { true ; Fiber . yield ; true } fiber . resume . should be_nil end it <str> do fiber = Fiber . new { Fiber . yield . should == <str> } fiber . resume fiber . resume <str> end it <str> do lambda { Fiber . yield } . should raise_error ( FiberError ) end end end 
