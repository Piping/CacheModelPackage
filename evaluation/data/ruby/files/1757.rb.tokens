describe <str> , <str> = > true do before <str> do CodeLoadingSpecs . spec_setup @path = File . expand_path <str> , CODE_LOADING_DIR end after <str> do CodeLoadingSpecs . spec_cleanup end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path ) . should be_true ScratchPad . recorded . should == [ <str> ] end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path ) . should be_true ScratchPad . recorded . should == [ <str> ] end it <str> do Dir . chdir CODE_LOADING_DIR do @object . load ( <str> ) . should be_true ScratchPad . recorded . should == [ <str> ] end end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path ) . should be_true ScratchPad . recorded . should == [ <str> , <str> ] end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path ) . should be_true ScratchPad . recorded . should == [ <str> , <str> ] end it <str> do @object . load ( @path ) . should be_true @object . load ( @path ) . should be_true ScratchPad . recorded . should == [ <str> , <str> ] end it <str> do $LOADED_FEATURES << @path @object . load ( @path ) . should be_true ScratchPad . recorded . should == [ <str> ] end it <str> do @object . require ( @path ) . should be_true @object . load ( @path ) . should be_true ScratchPad . recorded . should == [ <str> , <str> ] end it <str> do $LOAD_PATH << CODE_LOADING_DIR @object . load ( <str> ) . should be_true $LOAD_PATH . unshift CODE_LOADING_DIR + <str> @object . load ( <str> ) . should be_true ScratchPad . recorded . should == [ <str> , <str> ] end it <str> do @object . load ( @path ) . should be_true @object . require ( @path ) . should be_true ScratchPad . recorded . should == [ <str> , <str> ] end it <str> do @object . load ( @path ) . should be_true $LOADED_FEATURES . should == [ ] end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR lambda { @object . load ( path ) } . should raise_error ( LoadError ) end describe <str> do it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path , true ) . should be_true end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path , true ) Object . const_defined? ( <str> ) . should be_false end it <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path , true ) ScratchPad . recorded . first . should be_an_instance_of ( Class ) end describe <str> do before <str> do path = File . expand_path <str> , CODE_LOADING_DIR @object . load ( path , true ) end it <str> do ScratchPad . recorded . last . should == <str> end it <str> do lambda { @object . send ( <str> ) } . should raise_error ( NameError ) end end end describe <str> do before <str> do @env_home = ENV [ <str> ] ENV [ <str> ] = CODE_LOADING_DIR end after <str> do ENV [ <str> ] = @env_home end it <str> do @object . require ( <str> ) . should be_true ScratchPad . recorded . should == [ <str> ] end end end 
