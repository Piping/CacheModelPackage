require File . expand_path ( <str> , __FILE__ ) describe <str> do it <str> do retry_first = true retry_second = true results = [ ] begin results << <int> raise rescue results << <int> if retry_first results << <int> retry_first = false retry end begin results << <int> raise rescue results << <int> if retry_second results << <int> retry_second = false retry end end end results . should == [ <int> , <int> , <int> , <int> , <int> , <int> , <int> , <int> , <int> , <int> ] end it <str> do lambda { eval <str> } . should raise_error ( SyntaxError ) end end describe <str> do it <str> do counter = <int> begin counter += <int> raise <str> rescue retry unless counter == <int> end counter . should == <int> end end 
