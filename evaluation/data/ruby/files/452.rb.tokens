class Spinach :: Features :: ProjectBadgesBuild < Spinach :: FeatureSteps include SharedAuthentication include SharedProject include SharedBuilds include RepoHelpers step <str> do visit build_namespace_project_badges_path ( @project . namespace , @project , <str> : <str> , format : <str> ) end step <str> do expect_badge ( <str> ) end step <str> do expect_badge ( <str> ) end step <str> do expect_badge ( <str> ) end def expect_badge ( status ) svg = Nokogiri :: XML . parse ( page . body ) expect ( page . response_headers ) . to include ( <str> = > <str> ) expect ( svg . at ( <str> status <str> ) ) . to be_truthy end end 
