require <str> require <str> require <str> module Bosh::Dev describe ShipitLifecycle do before { allow ( Bosh :: Core :: Shell ) . to receive ( <str> ) . and_return ( shell ) } let ( <str> ) { instance_double ( <str> ) } before do repo_path = <str> allow ( Rugged :: Repository ) . to receive ( <str> ) . with ( <str> ) . and_return ( repo_path ) allow ( Rugged :: Repository ) . to receive ( <str> ) . with ( repo_path ) . and_return ( repository ) end let ( <str> ) { instance_double ( <str> , <str> : head_reference ) } let ( <str> ) { instance_double ( <str> , name : <str> ) } describe <str> do it <str> do expect ( shell ) . to receive ( <str> ) . with ( <str> , <str> : true ) subject . pull end end describe <str> do context <str> do before { allow ( head_reference ) . to receive_messages ( name : <str> ) } it <str> do expect ( shell ) . to receive ( <str> ) . with ( <str> , <str> : true ) subject . push end end context <str> do before { allow ( head_reference ) . to receive_messages ( name : <str> ) } it <str> do expect ( shell ) . not_to receive ( <str> ) expect { subject . push } . to raise_error end it <str> do expect { subject . push } . to raise_error ( <str> ) end end end end end 
