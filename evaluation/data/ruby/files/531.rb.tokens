require File . dirname ( __FILE__ ) + <str> require <str> class CallerBack extend Sass :: Callbacks define_callback <str> define_callback <str> def do_foo run_foo end def do_bar run_bar <int> end end module ClassLevelCallerBack extend Sass :: Callbacks define_callback <str> extend self def do_foo run_foo end end class SassCallbacksTest < MiniTest :: Test def test_simple_callback cb = CallerBack . new there = false cb . on_foo { there = true } cb . do_foo assert there , <str> end def test_multiple_callbacks cb = CallerBack . new str = <str> cb . on_foo { str += <str> } cb . on_foo { str += <str> } cb . do_foo assert_equal <str> , str end def test_callback_with_arg cb = CallerBack . new val = nil cb . on_bar { | a | val = a } cb . do_bar assert_equal <int> , val end def test_class_level_callback there = false ClassLevelCallerBack . on_foo { there = true } ClassLevelCallerBack . do_foo assert there , <str> end end 
