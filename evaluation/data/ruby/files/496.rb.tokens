require File . expand_path ( <str> , __FILE__ ) with_feature <str> do describe <str> do before ( <str> ) do @utf8 = <str> @ascii = <str> @utf8_ascii = @utf8 + @ascii end it <str> do @utf8 . bytes . should be_an_instance_of ( Array ) end it <str> do bytes = [ ] @utf8 . bytes { | b | bytes << b } . should == @utf8 bytes . should == @utf8 . bytes . to_a end it <str> do @utf8_ascii . bytes . to_a . size . should == @utf8_ascii . bytesize end it <str> do @ascii . bytes . to_a . each { | b | b . should be_an_instance_of ( Fixnum ) } @utf8_ascii . bytes { | b | b . should be_an_instance_of ( Fixnum ) } end it <str> do @utf8_ascii . bytes . to_a . should == @utf8_ascii . unpack ( <str> ) end it <str> do <str> . bytes . to_a . should == [ ] end end end with_feature <str> do describe <str> do before ( <str> ) do @utf8 = <str> @ascii = <str> @utf8_ascii = @utf8 + @ascii end it <str> do @utf8_ascii . bytes . to_a . each_with_index do | byte , index | byte . should == @utf8_ascii . getbyte ( index ) end end it <str> do @utf8 . force_encoding ( <str> ) . bytes . to_a . should == @utf8 . bytes . to_a end end end 
