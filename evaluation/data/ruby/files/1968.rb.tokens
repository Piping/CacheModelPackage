class String RTL_RANGES = [ [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] , [ <int> , <int> ] ] RTL_CLEANER_REGEXES = [ <str> , <str> ] def is_rtl? return false if self . strip . empty? count = <int> self . split ( <str> ) . each do | word | if starts_with_rtl_char? ( word ) count += <int> else count -= <int> end end return true if count > <int> return starts_with_rtl_char? ( self ) end def cleaned_is_rtl? string = String . new ( self ) RTL_CLEANER_REGEXES . each do | cleaner | string . gsub! ( cleaner , <str> ) end string . is_rtl? end def starts_with_rtl_char? ( string = self ) stripped = string . strip return false if stripped . empty? char = stripped . unpack ( <str> ) . first RTL_RANGES . each do | limit | return true if char > = limit [ <int> ] && char < = limit [ <int> ] end return false end end 
