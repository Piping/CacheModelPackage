require <str> unless defined? ( Rails ) && defined? ( Rails :: Info ) module Rails class Info ; end end end require <str> class InfoTest < ActiveSupport :: TestCase def setup Rails . send <str> , <str> silence_warnings { load <str> } end def test_property_with_block_swallows_exceptions_and_ignores_property assert_nothing_raised do Rails :: Info . module_eval do property ( <str> ) { raise } end end assert ! property_defined? ( <str> ) end def test_property_with_string Rails :: Info . module_eval do property <str> , <str> end assert_property <str> , <str> end def test_property_with_block Rails :: Info . module_eval do property ( <str> ) { <str> } end assert_property <str> , <str> end def test_rails_version assert_property <str> , File . read ( File . realpath ( <str> , __FILE__ ) ) . chomp end def test_html_includes_middleware Rails :: Info . module_eval do property <str> , [ <str> , <str> ] end html = Rails :: Info . to_html assert html . include? ( <str> ) properties . value_for ( <str> ) . each do | value | assert html . include? ( <str> CGI . escapeHTML ( value ) <str> ) end end protected def properties Rails :: Info . properties end def property_defined? ( property_name ) properties . names . include? property_name end def assert_property ( property_name , value ) raise <str> property_name . inspect <str> unless property_defined? property_name assert_equal value , properties . value_for ( property_name ) end end 
