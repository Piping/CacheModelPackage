require_relative <str> class TestMkmf class TestConvertible < TestMkmf def test_typeof_builtin [ <str> , [ <str> , <str> ] , <str> ] . each do | signed , prefix | <str> . each do | type | assert_equal ( ( prefix || signed ) + type , mkmf { convertible_int ( signed + type ) } , MKMFLOG ) end end end def test_typeof_typedef [ <str> , [ <str> , <str> ] , <str> ] . each do | signed , prefix | <str> . each do | type | open ( <str> , <str> ) { | f | f . puts <str> signed <str> type <str> } $defs . clear assert_equal ( ( prefix || signed ) + type , mkmf { convertible_int ( <str> , <str> ) } , MKMFLOG ) ( u = signed [ <str> ] ) and u . upcase! assert_include ( $defs , <str> + <str> prefix || signed <str> type <str> . quote ) assert_include ( $defs , <str> type . upcase <str> ) assert_include ( $defs , <str> u <str> type . upcase <str> ) assert_include ( $defs , <str> u <str> type . upcase <str> ) end end ensure File . unlink ( <str> ) end end end 
