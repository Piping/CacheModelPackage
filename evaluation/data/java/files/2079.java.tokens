package org . junit . tests . running . core ; import static org . junit . Assert . assertEquals ; import java . io . File ; import java . io . InputStream ; import org . junit . Test ; public class SystemExitTest { private static final int EXIT_CODE = <int> ; static public class Exit { public static void main ( String [ ] args ) { System . exit ( EXIT_CODE ) ; } } @Test public void failureCausesExitCodeOf1 ( ) throws Exception { String java = System . getProperty ( <str> ) + File . separator + <str> + File . separator + <str> ; String classPath = getClass ( ) . getClassLoader ( ) . getResource ( <str> ) . getFile ( ) + File . pathSeparator + System . getProperty ( <str> ) ; String [ ] cmd = { java , <str> , classPath , getClass ( ) . getName ( ) + <str> } ; Process process = Runtime . getRuntime ( ) . exec ( cmd ) ; InputStream input = process . getInputStream ( ) ; while ( ( input . read ( ) ) ! = - <int> ) ; assertEquals ( EXIT_CODE , process . waitFor ( ) ) ; } }