package org . apache . cassandra . db ; import java . nio . ByteBuffer ; import org . apache . cassandra . dht . Token ; public class CachedHashDecoratedKey extends BufferDecoratedKey { long hash0 ; long hash1 ; volatile boolean hashCached ; public CachedHashDecoratedKey ( Token token , ByteBuffer key ) { super ( token , key ) ; hashCached = false ; } @Override public void filterHash ( long [ ] dest ) { if ( hashCached ) { dest [ <int> ] = hash0 ; dest [ <int> ] = hash1 ; } else { super . filterHash ( dest ) ; hash0 = dest [ <int> ] ; hash1 = dest [ <int> ] ; hashCached = true ; } } } 
