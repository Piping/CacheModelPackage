package com . badlogic . gdx . tools . etc1 ; import java . io . File ; import java . util . ArrayList ; import com . badlogic . gdx . files . FileHandle ; import com . badlogic . gdx . graphics . Pixmap ; import com . badlogic . gdx . graphics . Pixmap . Format ; import com . badlogic . gdx . graphics . glutils . ETC1 ; import com . badlogic . gdx . tools . FileProcessor ; import com . badlogic . gdx . utils . GdxNativesLoader ; public class ETC1Compressor { static class ETC1FileProcessor extends FileProcessor { ETC1FileProcessor ( ) { addInputSuffix ( <str> ) ; addInputSuffix ( <str> ) ; addInputSuffix ( <str> ) ; addInputSuffix ( <str> ) ; setOutputSuffix ( <str> ) ; } @Override protected void processFile ( Entry entry ) throws Exception { System . out . println ( <str> + entry . inputFile ) ; Pixmap pixmap = new Pixmap ( new FileHandle ( entry . inputFile ) ) ; if ( pixmap . getFormat ( ) ! = Format . RGB888 & & pixmap . getFormat ( ) ! = Format . RGB565 ) { System . out . println ( <str> + pixmap . getFormat ( ) + <str> ) ; Pixmap tmp = new Pixmap ( pixmap . getWidth ( ) , pixmap . getHeight ( ) , Format . RGB888 ) ; tmp . drawPixmap ( pixmap , <int> , <int> , <int> , <int> , pixmap . getWidth ( ) , pixmap . getHeight ( ) ) ; pixmap . dispose ( ) ; pixmap = tmp ; } ETC1 . encodeImagePKM ( pixmap ) . write ( new FileHandle ( entry . outputFile ) ) ; pixmap . dispose ( ) ; } @Override protected void processDir ( Entry entryDir , ArrayList < Entry > value ) throws Exception { if ( ! entryDir . outputDir . exists ( ) ) { if ( ! entryDir . outputDir . mkdirs ( ) ) throw new Exception ( <str> + entryDir . outputDir + <str> ) ; } } } public static void process ( String inputDirectory , String outputDirectory , boolean recursive , boolean flatten ) throws Exception { GdxNativesLoader . load ( ) ; ETC1FileProcessor processor = new ETC1FileProcessor ( ) ; processor . setRecursive ( recursive ) ; processor . setFlattenOutput ( flatten ) ; processor . process ( new File ( inputDirectory ) , new File ( outputDirectory ) ) ; } public static void main ( String [ ] args ) throws Exception { if ( args . length ! = <int> ) { System . out . println ( <str> ) ; System . exit ( - <int> ) ; } ETC1Compressor . process ( args [ <int> ] , args [ <int> ] , true , false ) ; } }